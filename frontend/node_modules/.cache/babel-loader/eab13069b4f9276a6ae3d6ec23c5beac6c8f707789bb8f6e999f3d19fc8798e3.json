{"ast":null,"code":"const API_BASE = \"http://localhost:5000\";\nexport const getAccessToken = () => localStorage.getItem(\"accessToken\") || \"\";\nexport const setAccessToken = token => {\n  const value = String(token || \"\").trim();\n  if (value) {\n    localStorage.setItem(\"accessToken\", value);\n  } else {\n    localStorage.removeItem(\"accessToken\");\n  }\n};\nexport const apiFetch = async (path, options = {}) => {\n  const headers = new Headers(options.headers || {});\n  const token = getAccessToken();\n  if (token && !headers.has(\"Authorization\")) {\n    headers.set(\"Authorization\", `Bearer ${token}`);\n  }\n  const url = path.startsWith(\"http\") ? path : `${API_BASE}${path}`;\n  return fetch(url, {\n    ...options,\n    headers\n  });\n};\nexport const apiFetchJson = async (path, options = {}) => {\n  const response = await apiFetch(path, options);\n  const data = await response.json().catch(() => ({}));\n  if (!response.ok) {\n    const error = new Error((data === null || data === void 0 ? void 0 : data.error) || `HTTP ${response.status}`);\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n  return data;\n};","map":{"version":3,"names":["API_BASE","getAccessToken","localStorage","getItem","setAccessToken","token","value","String","trim","setItem","removeItem","apiFetch","path","options","headers","Headers","has","set","url","startsWith","fetch","apiFetchJson","response","data","json","catch","ok","error","Error","status"],"sources":["/Users/eurocare/kl-claude-kleinanzeigen-messages-parser-sW855/frontend/src/api.js"],"sourcesContent":["const API_BASE = \"http://localhost:5000\";\n\nexport const getAccessToken = () => localStorage.getItem(\"accessToken\") || \"\";\n\nexport const setAccessToken = (token) => {\n  const value = String(token || \"\").trim();\n  if (value) {\n    localStorage.setItem(\"accessToken\", value);\n  } else {\n    localStorage.removeItem(\"accessToken\");\n  }\n};\n\nexport const apiFetch = async (path, options = {}) => {\n  const headers = new Headers(options.headers || {});\n  const token = getAccessToken();\n  if (token && !headers.has(\"Authorization\")) {\n    headers.set(\"Authorization\", `Bearer ${token}`);\n  }\n  const url = path.startsWith(\"http\") ? path : `${API_BASE}${path}`;\n  return fetch(url, { ...options, headers });\n};\n\nexport const apiFetchJson = async (path, options = {}) => {\n  const response = await apiFetch(path, options);\n  const data = await response.json().catch(() => ({}));\n  if (!response.ok) {\n    const error = new Error(data?.error || `HTTP ${response.status}`);\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n  return data;\n};\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,uBAAuB;AAExC,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAMC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,IAAI,EAAE;AAE7E,OAAO,MAAMC,cAAc,GAAIC,KAAK,IAAK;EACvC,MAAMC,KAAK,GAAGC,MAAM,CAACF,KAAK,IAAI,EAAE,CAAC,CAACG,IAAI,CAAC,CAAC;EACxC,IAAIF,KAAK,EAAE;IACTJ,YAAY,CAACO,OAAO,CAAC,aAAa,EAAEH,KAAK,CAAC;EAC5C,CAAC,MAAM;IACLJ,YAAY,CAACQ,UAAU,CAAC,aAAa,CAAC;EACxC;AACF,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACpD,MAAMC,OAAO,GAAG,IAAIC,OAAO,CAACF,OAAO,CAACC,OAAO,IAAI,CAAC,CAAC,CAAC;EAClD,MAAMT,KAAK,GAAGJ,cAAc,CAAC,CAAC;EAC9B,IAAII,KAAK,IAAI,CAACS,OAAO,CAACE,GAAG,CAAC,eAAe,CAAC,EAAE;IAC1CF,OAAO,CAACG,GAAG,CAAC,eAAe,EAAE,UAAUZ,KAAK,EAAE,CAAC;EACjD;EACA,MAAMa,GAAG,GAAGN,IAAI,CAACO,UAAU,CAAC,MAAM,CAAC,GAAGP,IAAI,GAAG,GAAGZ,QAAQ,GAAGY,IAAI,EAAE;EACjE,OAAOQ,KAAK,CAACF,GAAG,EAAE;IAAE,GAAGL,OAAO;IAAEC;EAAQ,CAAC,CAAC;AAC5C,CAAC;AAED,OAAO,MAAMO,YAAY,GAAG,MAAAA,CAAOT,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EACxD,MAAMS,QAAQ,GAAG,MAAMX,QAAQ,CAACC,IAAI,EAAEC,OAAO,CAAC;EAC9C,MAAMU,IAAI,GAAG,MAAMD,QAAQ,CAACE,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;EACpD,IAAI,CAACH,QAAQ,CAACI,EAAE,EAAE;IAChB,MAAMC,KAAK,GAAG,IAAIC,KAAK,CAAC,CAAAL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEI,KAAK,KAAI,QAAQL,QAAQ,CAACO,MAAM,EAAE,CAAC;IACjEF,KAAK,CAACE,MAAM,GAAGP,QAAQ,CAACO,MAAM;IAC9BF,KAAK,CAACJ,IAAI,GAAGA,IAAI;IACjB,MAAMI,KAAK;EACb;EACA,OAAOJ,IAAI;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}