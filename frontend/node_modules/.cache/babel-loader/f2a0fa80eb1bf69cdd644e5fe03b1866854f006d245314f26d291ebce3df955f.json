{"ast":null,"code":"import _objectSpread from\"/Users/eurocare/Downloads/barvihaluxury-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import{apiFetchJson}from\"../api\";import{XIcon,ChevronRightIcon,RefreshIcon,LoadingIcon}from\"./Icons\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdModal=_ref=>{let{isOpen,onClose,onSubmit,publishing,accounts,categories,onRefreshCategories,loadingCategories,extraFields,extraFieldValues,setExtraFieldValues,loadingExtraFields,extraFieldsError,newAd,setNewAd,adImages,setAdImages,categoriesUpdatedAt}=_ref;if(!isOpen)return null;const[categoryPath,setCategoryPath]=useState([]);const[localCategories,setLocalCategories]=useState([]);const[didRestorePath,setDidRestorePath]=useState(false);const[imagePreviews,setImagePreviews]=useState([]);const[loadingPlz,setLoadingPlz]=useState(false);const categoryListRef=useRef(null);const pendingChildrenRef=useRef(new Map());const prefetchRootRef=useRef(\"\");const prefetchInFlightRef=useRef(false);const prefetchedTargetsRef=useRef(new Set());const prefetchTokenRef=useRef(0);const inputStyle={width:\"100%\",padding:\"12px 16px\",border:\"1px solid rgba(148,163,184,0.2)\",borderRadius:\"14px\",background:\"rgba(15,23,42,0.8)\",fontSize:\"14px\",color:\"#e2e8f0\",transition:\"all 0.2s ease\",outline:\"none\"};const labelStyle={display:\"block\",marginBottom:\"10px\",fontWeight:\"600\",color:\"#e2e8f0\",fontSize:\"14px\"};const selectedUnderlineStyle={borderBottom:\"1px solid rgba(125, 211, 252, 0.95)\",paddingBottom:\"1px\"};const formatAccountLabel=account=>{const name=account.profileName||account.username||\"–ê–∫–∫–∞—É–Ω—Ç\";const email=account.profileEmail||\"\";return email?\"\".concat(name,\" (\").concat(email,\")\"):name;};const getCategoryLabel=category=>{if(!category)return\"\";const raw=category.name||category.label||category.title||category.categoryName||category.displayName;const text=String(raw||\"\").trim();if(text)return text;const fallback=category.id||category.url||\"\";return String(fallback);};const isNumericCategoryId=value=>/^\\d+$/.test(String(value||\"\"));const looksLikeCategoryUrl=value=>/\\/c\\d+(?:\\/|$)/i.test(String(value||\"\"));const isAttributeOptionNode=(node,parent)=>{if(!node||!parent)return false;const parentId=parent.id!==undefined&&parent.id!==null?String(parent.id):\"\";if(!isNumericCategoryId(parentId))return false;const idValue=node.id!==undefined&&node.id!==null?String(node.id):\"\";const urlValue=node.url?String(node.url):\"\";if(isNumericCategoryId(idValue))return false;if(looksLikeCategoryUrl(urlValue))return false;if(Array.isArray(node.children)&&node.children.length>0)return false;return Boolean(idValue||urlValue);};const filterCategoryChildren=(nodes,parent)=>(Array.isArray(nodes)?nodes:[]).filter(node=>!isAttributeOptionNode(node,parent));const getCategoryValue=category=>{if(!category)return\"\";const id=category.id!==undefined&&category.id!==null?String(category.id):\"\";const url=category.url?String(category.url):\"\";if(id&&isNumericCategoryId(id))return id;if(url)return url;return id;};const getNodeKey=node=>{if(!node)return\"\";const value=getCategoryValue(node);if(value)return\"value:\".concat(value);if(node.name)return\"name:\".concat(String(node.name));return\"\";};const mergeCategoryTrees=(prevNodes,nextNodes)=>{if(!Array.isArray(nextNodes)||!nextNodes.length){return Array.isArray(prevNodes)?prevNodes:[];}const prev=Array.isArray(prevNodes)?prevNodes:[];const prevMap=new Map();for(const node of prev){const key=getNodeKey(node);if(key)prevMap.set(key,node);}const used=new Set();const merged=nextNodes.map(node=>{const key=getNodeKey(node);if(key)used.add(key);const prevNode=key?prevMap.get(key):null;const nextChildren=Array.isArray(node.children)?node.children:[];const prevChildren=(prevNode===null||prevNode===void 0?void 0:prevNode.children)||[];const mergedChildren=nextChildren.length?mergeCategoryTrees(prevChildren,nextChildren):prevChildren;return _objectSpread(_objectSpread(_objectSpread({},prevNode||{}),node),{},{children:mergedChildren});});for(const[key,node]of prevMap.entries()){if(!used.has(key))merged.push(node);}return merged;};const buildPathToNode=function(nodes,targetValue){let path=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(!targetValue||!Array.isArray(nodes))return[];const target=String(targetValue);for(const node of nodes){var _node$children;const matches=node.id!==undefined&&node.id!==null&&String(node.id)===target||node.url&&String(node.url)===target;const nextValue=getCategoryValue(node);const nextPath=nextValue?[...path,nextValue]:path;if(matches)return nextPath;if((_node$children=node.children)!==null&&_node$children!==void 0&&_node$children.length){const childPath=buildPathToNode(node.children,targetValue,nextPath);if(childPath.length)return childPath;}}return[];};const findNode=(nodes,value)=>{if(!value)return null;for(const node of nodes){var _node$children2;if(String(node.id)===String(value)||String(node.url)===String(value))return node;if((_node$children2=node.children)!==null&&_node$children2!==void 0&&_node$children2.length){const found=findNode(node.children,value);if(found)return found;}}return null;};const getBreadcrumbForPath=path=>{const breadcrumb=[];let current=localCategories;for(const pathItem of path){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(!found)break;breadcrumb.push(found);current=filterCategoryChildren(found.children||[],found);}return breadcrumb;};const resolveCategorySelection=path=>{const breadcrumb=getBreadcrumbForPath(path);const selectedNode=breadcrumb.length?breadcrumb[breadcrumb.length-1]:null;const numericNode=[...breadcrumb].reverse().find(node=>/^\\d+$/.test(String((node===null||node===void 0?void 0:node.id)||\"\")));return{selectedNode,numericNode:numericNode||selectedNode};};useEffect(()=>{setLocalCategories(prev=>mergeCategoryTrees(prev,categories||[]));},[categories]);useEffect(()=>{if(isOpen){setCategoryPath([]);setDidRestorePath(false);setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{categoryId:\"\",categoryUrl:\"\",categoryPath:[]}));}},[isOpen,setNewAd]);useEffect(()=>{if(!adImages||adImages.length===0){setImagePreviews([]);return undefined;}const previews=adImages.map(file=>({file,url:URL.createObjectURL(file)}));setImagePreviews(previews);return()=>{previews.forEach(preview=>URL.revokeObjectURL(preview.url));};},[adImages]);useEffect(()=>{if(!isOpen)return;setNewAd(prev=>{const currentPath=Array.isArray(prev.categoryPath)?prev.categoryPath:[];const nextPath=categoryPath;if(currentPath.length===nextPath.length&&currentPath.every((item,idx)=>String(item)===String(nextPath[idx]))){return prev;}return _objectSpread(_objectSpread({},prev),{},{categoryPath:[...nextPath]});});},[isOpen,categoryPath,setNewAd]);useEffect(()=>{if(!isOpen)return;if(categoryPath.length)return;if(didRestorePath)return;const target=(newAd===null||newAd===void 0?void 0:newAd.categoryId)||(newAd===null||newAd===void 0?void 0:newAd.categoryUrl);if(!target)return;const restoredPath=buildPathToNode(localCategories,target);if(restoredPath.length){setCategoryPath(restoredPath);setDidRestorePath(true);}},[isOpen,categoryPath.length,didRestorePath,newAd===null||newAd===void 0?void 0:newAd.categoryId,newAd===null||newAd===void 0?void 0:newAd.categoryUrl,localCategories]);useEffect(()=>{if(!isOpen)return;if(!newAd.accountId)return;if(!categoryPath.length)return;const lastId=categoryPath[categoryPath.length-1];const node=findNode(localCategories,lastId);if(node&&(!node.children||node.children.length===0)){requestChildren(node);}},[isOpen,newAd.accountId,categoryPath,localCategories]);useEffect(()=>{if(!isOpen)return;if(!categoryPath.length){console.log(\"[AdModal] category path empty\");return;}const current=getCurrentCategories();console.log(\"[AdModal] category path\",categoryPath.join(\" > \"),\"current count\",current.length);},[isOpen,categoryPath,localCategories]);useEffect(()=>{if(!isOpen)return;if(!categoryListRef.current)return;categoryListRef.current.scrollTop=0;},[isOpen,categoryPath]);const getCurrentCategories=()=>{if(categoryPath.length===0)return localCategories;let current=localCategories;let parent=null;for(const pathItem of categoryPath){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(!found){const fallback=findNode(localCategories,pathItem);return filterCategoryChildren((fallback===null||fallback===void 0?void 0:fallback.children)||[],fallback);}parent=found;current=filterCategoryChildren(found.children||[],found);}return current;};const getSelectedCategory=()=>{if(categoryPath.length===0)return null;const lastId=categoryPath[categoryPath.length-1];return findNode(localCategories,lastId);};const updateCategorySelection=async category=>{if(!newAd.accountId){alert(\"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\");return;}setDidRestorePath(true);const parentNode=getSelectedCategory();if(isAttributeOptionNode(category,parentNode)){console.warn(\"[AdModal] ignoring attribute option node\",(category===null||category===void 0?void 0:category.name)||(category===null||category===void 0?void 0:category.id));return;}const value=getCategoryValue(category);if(!value)return;const normalizedValue=String(value);// –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —É–∂–µ –≤ –ø—É—Ç–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–µ–π\nconst indexInPath=categoryPath.findIndex(id=>String(id)===normalizedValue);if(indexInPath!==-1){const nextPath=categoryPath.slice(0,indexInPath+1);setCategoryPath(nextPath);// –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é\nconst{selectedNode,numericNode}=resolveCategorySelection(nextPath);setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{categoryId:numericNode!==null&&numericNode!==void 0&&numericNode.id?String(numericNode.id):\"\",categoryUrl:(selectedNode===null||selectedNode===void 0?void 0:selectedNode.url)||(numericNode===null||numericNode===void 0?void 0:numericNode.url)||\"\",categoryKey:nextPath.join(\">\"),categoryPath:[...nextPath]}));return;}// –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –ø—É—Ç—å\nconst newPath=[...categoryPath,normalizedValue];setCategoryPath(newPath);// –í–°–ï–ì–î–ê –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ç–µ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å\n// (—ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É 3+ —É—Ä–æ–≤–Ω–µ–π)\nconst childrenResult=await requestChildren(category);// –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ —Ñ–æ—Ä–º–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∫–æ–Ω–µ—á–Ω–∞—è\nconst{selectedNode,numericNode}=resolveCategorySelection(newPath);const knownChildren=Array.isArray(category===null||category===void 0?void 0:category.children)?category.children:[];const selectedChildren=Array.isArray(selectedNode===null||selectedNode===void 0?void 0:selectedNode.children)?selectedNode.children:[];const fetchedChildren=Array.isArray(childrenResult)?childrenResult:null;const hasFetchedChildren=fetchedChildren?filterCategoryChildren(fetchedChildren,category).length>0:null;const hasKnownChildren=filterCategoryChildren(knownChildren,category).length>0||filterCategoryChildren(selectedChildren,selectedNode).length>0;const isLeaf=hasFetchedChildren!==null?!hasFetchedChildren:!hasKnownChildren;setNewAd(prev=>{const next=_objectSpread({},prev);if(isLeaf){next.categoryId=numericNode!==null&&numericNode!==void 0&&numericNode.id?String(numericNode.id):\"\";next.categoryUrl=(selectedNode===null||selectedNode===void 0?void 0:selectedNode.url)||(numericNode===null||numericNode===void 0?void 0:numericNode.url)||\"\";}else{next.categoryId=\"\";next.categoryUrl=\"\";}next.categoryKey=newPath.join(\">\");next.categoryPath=[...newPath];if(!next.categoryId||next.categoryId!==prev.categoryId){if(setExtraFieldValues){setExtraFieldValues({});}}return next;});};const updateNodeChildren=(nodes,targetValue,children)=>nodes.map(node=>{var _node$children3;const matches=String(node.id)===String(targetValue)||String(node.url)===String(targetValue);if(matches){return _objectSpread(_objectSpread({},node),{},{children});}if((_node$children3=node.children)!==null&&_node$children3!==void 0&&_node$children3.length){return _objectSpread(_objectSpread({},node),{},{children:updateNodeChildren(node.children,targetValue,children)});}return node;});const requestChildren=async node=>{const rawId=(node===null||node===void 0?void 0:node.id)!==undefined&&(node===null||node===void 0?void 0:node.id)!==null?String(node.id):\"\";const rawUrl=node!==null&&node!==void 0&&node.url?String(node.url):\"\";const idValue=rawId&&isNumericCategoryId(rawId)?rawId:\"\";const urlValue=idValue?\"\":rawUrl||\"\";if(!idValue&&!urlValue)return;const targetValue=getCategoryValue(node)||idValue||urlValue;if(!targetValue)return;const pending=pendingChildrenRef.current.get(targetValue);if(pending)return pending;const task=(async()=>{const params=new URLSearchParams();if(idValue)params.set(\"id\",idValue);else params.set(\"url\",urlValue);if(newAd!==null&&newAd!==void 0&&newAd.accountId)params.set(\"accountId\",newAd.accountId);try{var _data;let data=await apiFetchJson(\"/api/categories/children?\".concat(params.toString()));let rawChildren=Array.isArray((_data=data)===null||_data===void 0?void 0:_data.children)?data.children:null;if(Array.isArray(rawChildren)&&rawChildren.length===0){var _data2;const refreshParams=new URLSearchParams(params.toString());refreshParams.set(\"refresh\",\"true\");data=await apiFetchJson(\"/api/categories/children?\".concat(refreshParams.toString()));rawChildren=Array.isArray((_data2=data)===null||_data2===void 0?void 0:_data2.children)?data.children:rawChildren;}if(!Array.isArray(rawChildren))return null;const filteredChildren=filterCategoryChildren(rawChildren,node);const count=Array.isArray(filteredChildren)?filteredChildren.length:0;const sample=Array.isArray(filteredChildren)?filteredChildren.slice(0,5).map(item=>(item===null||item===void 0?void 0:item.name)||(item===null||item===void 0?void 0:item.id)||(item===null||item===void 0?void 0:item.url)):[];console.log(\"[AdModal] children response count\",count,\"target\",targetValue,\"sample\",sample);setLocalCategories(prev=>{var _updated$children;const next=updateNodeChildren(prev,targetValue,filteredChildren);const updated=findNode(next,targetValue);console.log(\"[AdModal] children applied count\",(updated===null||updated===void 0?void 0:(_updated$children=updated.children)===null||_updated$children===void 0?void 0:_updated$children.length)||0,\"target\",targetValue);return next;});return filteredChildren;}catch(error){return null;}})();pendingChildrenRef.current.set(targetValue,task);try{return await task;}finally{pendingChildrenRef.current.delete(targetValue);}};const fetchAccountPostalCode=async()=>{if(!(newAd!==null&&newAd!==void 0&&newAd.accountId)){alert(\"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\");return;}setLoadingPlz(true);try{const data=await apiFetchJson(\"/api/accounts/\".concat(newAd.accountId,\"/plz\"));if(data!==null&&data!==void 0&&data.success&&data!==null&&data!==void 0&&data.postalCode){setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{postalCode:data.postalCode}));}else{alert((data===null||data===void 0?void 0:data.error)||\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\");}}catch(error){alert((error===null||error===void 0?void 0:error.message)||\"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\");}finally{setLoadingPlz(false);}};useEffect(()=>{if(!isOpen)return;if(!newAd.accountId)return;if(categoryPath.length!==1)return;const rootValue=String(categoryPath[0]||\"\");if(!rootValue)return;if(prefetchRootRef.current!==rootValue){prefetchRootRef.current=rootValue;prefetchedTargetsRef.current=new Set();prefetchInFlightRef.current=false;}if(prefetchInFlightRef.current)return;const current=getCurrentCategories();if(!current.length)return;const token=++prefetchTokenRef.current;prefetchInFlightRef.current=true;(async()=>{for(const node of current){var _node$children4;if(prefetchTokenRef.current!==token)return;const key=getCategoryValue(node);if(!key)continue;if(prefetchedTargetsRef.current.has(key))continue;prefetchedTargetsRef.current.add(key);if((_node$children4=node.children)!==null&&_node$children4!==void 0&&_node$children4.length)continue;await requestChildren(node);await new Promise(resolve=>setTimeout(resolve,120));}})().finally(()=>{if(prefetchTokenRef.current===token){prefetchInFlightRef.current=false;}});},[isOpen,newAd.accountId,categoryPath,localCategories]);const getCategoryBreadcrumb=()=>{const breadcrumb=[];let current=localCategories;for(const pathItem of categoryPath){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(found){breadcrumb.push(found);current=filterCategoryChildren(found.children||[],found);}}return breadcrumb;};const goBackInCategories=index=>{setDidRestorePath(true);if(index<0){setCategoryPath([]);}else{setCategoryPath(categoryPath.slice(0,index+1));}};const currentCategories=getCurrentCategories();const breadcrumb=getCategoryBreadcrumb();return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",style:{position:\"fixed\",top:0,left:0,right:0,bottom:0,backgroundColor:\"rgba(2, 6, 23, 0.85)\",backdropFilter:\"blur(8px)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:1000,padding:\"20px\",animation:\"fadeIn 0.2s ease-out\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modal-card-wide modal-card-tall\",style:{background:\"linear-gradient(145deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%)\",borderRadius:\"24px\",padding:\"32px\",width:\"760px\",maxWidth:\"100%\",maxHeight:\"92vh\",overflow:\"auto\",border:\"1px solid rgba(148,163,184,0.15)\",boxShadow:\"0 30px 60px rgba(0,0,0,0.5), 0 0 60px rgba(0,0,0,0.3)\",color:\"#e2e8f0\",animation:\"scaleIn 0.3s ease-out\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",marginBottom:\"28px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"14px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"48px\",height:\"48px\",borderRadius:\"14px\",background:\"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1))\",border:\"1px solid rgba(245, 158, 11, 0.3)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",boxShadow:\"0 4px 15px rgba(245, 158, 11, 0.2)\",fontSize:\"22px\"},children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:\"22px\",fontWeight:\"700\"},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"4px 0 0\",color:\"#94a3b8\",fontSize:\"13px\"},children:\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044F \\u0438 \\u043E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0443\\u0439\\u0442\\u0435 \\u0432 Kleinanzeigen\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{width:\"40px\",height:\"40px\",borderRadius:\"12px\",background:\"rgba(148,163,184,0.1)\",border:\"1px solid rgba(148,163,184,0.2)\",cursor:\"pointer\",color:\"#94a3b8\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",transition:\"all 0.2s ease\"},onMouseEnter:e=>{e.currentTarget.style.background=\"rgba(239, 68, 68, 0.15)\";e.currentTarget.style.borderColor=\"rgba(239, 68, 68, 0.3)\";e.currentTarget.style.color=\"#f87171\";},onMouseLeave:e=>{e.currentTarget.style.background=\"rgba(148,163,184,0.1)\";e.currentTarget.style.borderColor=\"rgba(148,163,184,0.2)\";e.currentTarget.style.color=\"#94a3b8\";},children:/*#__PURE__*/_jsx(XIcon,{size:18})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"18px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442:\"}),/*#__PURE__*/_jsxs(\"select\",{value:newAd.accountId,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{accountId:e.target.value})),style:inputStyle,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[formatAccountLabel(account),\" (\",account.proxy||\"–ë–µ–∑ –ø—Ä–æ–∫—Å–∏\",\")\"]},account.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAd.title,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (10-65 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newAd.description,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (10-4000 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",rows:\"5\",style:_objectSpread(_objectSpread({},inputStyle),{},{minHeight:\"140px\",resize:\"vertical\",fontFamily:\"inherit\"}),onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0426\\u0435\\u043D\\u0430 (EUR):\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"8px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newAd.price,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{price:e.target.value})),placeholder:\"0.00\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#94a3b8\",fontWeight:\"600\"},children:\"\\u20AC\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"10px\",alignItems:\"center\"},children:[categoriesUpdatedAt&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:[\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E: \",new Date(categoriesUpdatedAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>onRefreshCategories(true),disabled:loadingCategories,className:\"secondary-button\",style:{padding:\"6px 12px\",border:\"1px solid rgba(148,163,184,0.3)\",cursor:loadingCategories?\"not-allowed\":\"pointer\",fontSize:\"12px\",display:\"flex\",alignItems:\"center\",gap:\"6px\"},children:[loadingCategories?/*#__PURE__*/_jsx(LoadingIcon,{size:14}):/*#__PURE__*/_jsx(RefreshIcon,{size:14}),loadingCategories?\"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...\":\"–û–±–Ω–æ–≤–∏—Ç—å\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid rgba(148,163,184,0.3)\",borderRadius:\"12px\",background:\"rgba(15,23,42,0.7)\",marginTop:\"10px\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"12px 16px\",borderBottom:\"1px solid rgba(148,163,184,0.2)\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"600\",color:\"#e2e8f0\"},children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:\"\\u041D\\u0430\\u0432\\u0438\\u0433\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\"})]}),breadcrumb.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"10px 16px\",borderBottom:\"1px solid rgba(148,163,184,0.2)\",display:\"flex\",gap:\"8px\",alignItems:\"center\",flexWrap:\"wrap\",fontSize:\"12px\",color:\"#94a3b8\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>goBackInCategories(-1),style:{background:\"rgba(59,130,246,0.1)\",border:\"1px solid rgba(59,130,246,0.3)\",borderRadius:\"6px\",padding:\"4px 8px\",cursor:\"pointer\",color:\"#7dd3fc\",fontSize:\"12px\",transition:\"all 0.2s ease\"},onMouseEnter:e=>e.currentTarget.style.background=\"rgba(59,130,246,0.2)\",onMouseLeave:e=>e.currentTarget.style.background=\"rgba(59,130,246,0.1)\",children:\"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),breadcrumb.map((cat,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ChevronRightIcon,{size:12}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>goBackInCategories(index),style:{background:index===breadcrumb.length-1?\"rgba(59,130,246,0.2)\":\"rgba(148,163,184,0.1)\",border:\"1px solid \"+(index===breadcrumb.length-1?\"rgba(59,130,246,0.3)\":\"rgba(148,163,184,0.2)\"),borderRadius:\"6px\",padding:\"4px 8px\",cursor:index===breadcrumb.length-1?\"default\":\"pointer\",color:index===breadcrumb.length-1?\"#7dd3fc\":\"#e2e8f0\",fontSize:\"12px\",transition:\"all 0.2s ease\"},children:getCategoryLabel(cat)})]},cat.id||cat.url))]}),/*#__PURE__*/_jsx(\"div\",{ref:categoryListRef,style:{padding:\"12px\",minHeight:\"220px\",maxHeight:\"300px\",overflowY:\"auto\"},children:currentCategories.length?currentCategories.map(category=>{const value=category.id||category.url||\"\";const hasChildren=category.children&&category.children.length>0;return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>updateCategorySelection(category),disabled:!newAd.accountId,style:{width:\"100%\",textAlign:\"left\",padding:\"10px 12px\",marginBottom:\"6px\",borderRadius:\"10px\",border:\"1px solid transparent\",background:\"rgba(148,163,184,0.05)\",color:\"#e2e8f0\",cursor:newAd.accountId?\"pointer\":\"not-allowed\",transition:\"all 0.2s ease\"},onMouseEnter:e=>{e.currentTarget.style.background=\"rgba(59,130,246,0.1)\";e.currentTarget.style.borderColor=\"rgba(59,130,246,0.3)\";},onMouseLeave:e=>{e.currentTarget.style.background=\"rgba(148,163,184,0.05)\";e.currentTarget.style.borderColor=\"transparent\";},children:/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{children:getCategoryLabel(category)}),/*#__PURE__*/_jsx(ChevronRightIcon,{size:16,color:\"#94a3b8\"})]})},category.id||category.url||getCategoryLabel(category));}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#94a3b8\",padding:\"12px\",textAlign:\"center\"},children:!newAd.accountId?\"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\":categoryPath.length>0?\"–ù–µ—Ç –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π - —ç—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è\":\"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã\"})}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid rgba(148,163,184,0.2)\",padding:\"10px 16px\",color:\"#94a3b8\",fontSize:\"12px\",display:\"flex\",gap:\"8px\",flexWrap:\"wrap\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:\"rgba(59,130,246,0.2)\",padding:\"4px 8px\",borderRadius:\"999px\",color:\"#e2e8f0\",fontSize:\"11px\",fontWeight:\"600\"},children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E\"}),breadcrumb.length>0?breadcrumb.map((cat,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[index>0&&/*#__PURE__*/_jsx(ChevronRightIcon,{size:12}),/*#__PURE__*/_jsx(\"span\",{style:index===breadcrumb.length-1?selectedUnderlineStyle:undefined,children:getCategoryLabel(cat)})]},cat.id||cat.url)):/*#__PURE__*/_jsx(\"span\",{children:\"\\u2014\"})]})]})]}),loadingExtraFields&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#94a3b8\",fontSize:\"12px\",display:\"flex\",alignItems:\"center\",gap:\"8px\"},children:[/*#__PURE__*/_jsx(LoadingIcon,{size:14}),\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u043E\\u0432 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438...\"]}),!loadingExtraFields&&extraFieldsError&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#f87171\",fontSize:\"12px\"},children:[\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438: \",extraFieldsError]}),!loadingExtraFields&&!extraFieldsError&&(newAd.categoryId||newAd.categoryUrl)&&(!extraFields||extraFields.length===0)&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#94a3b8\",fontSize:\"12px\"},children:\"\\u0414\\u043B\\u044F \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0445 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u043E\\u0432.\"}),!loadingExtraFields&&(extraFields===null||extraFields===void 0?void 0:extraFields.length)>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"6px\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:\"12px\"},children:extraFields.map(field=>{var _field$options;const key=field.name||field.label;const value=key?(extraFieldValues===null||extraFieldValues===void 0?void 0:extraFieldValues[key])||\"\":\"\";return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"6px\"},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:[field.label,field.required?\" *\":\"\"]}),/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:e=>{const nextValue=e.target.value;setExtraFieldValues(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:nextValue}));},style:inputStyle,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435\"}),(_field$options=field.options)===null||_field$options===void 0?void 0:_field$options.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value||option.label))]})]},field.name||field.label);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",gap:\"12px\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"PLZ (\\u0438\\u043D\\u0434\\u0435\\u043A\\u0441):\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:fetchAccountPostalCode,disabled:loadingPlz,style:{padding:\"6px 12px\",borderRadius:\"999px\",border:\"1px solid rgba(59,130,246,0.35)\",background:\"rgba(59,130,246,0.1)\",color:\"#60a5fa\",fontSize:\"12px\",fontWeight:\"600\",cursor:loadingPlz?\"not-allowed\":\"pointer\",whiteSpace:\"nowrap\"},children:loadingPlz?\"–ó–∞–≥—Ä—É–∑–∫–∞...\":\"PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAd.postalCode,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{postalCode:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",multiple:true,onChange:e=>setAdImages(Array.from(e.target.files||[])),style:{width:\"100%\",padding:\"12px\",border:\"1px dashed rgba(148,163,184,0.4)\",borderRadius:\"12px\",background:\"rgba(15,23,42,0.7)\",color:\"#e2e8f0\",cursor:\"pointer\",transition:\"all 0.3s ease\"}}),adImages.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"8px\",fontSize:\"12px\",color:\"#94a3b8\"},children:[\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432: \",adImages.length]}),imagePreviews.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"12px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(96px, 1fr))\",gap:\"8px\"},children:imagePreviews.map((preview,index)=>/*#__PURE__*/_jsx(\"div\",{style:{borderRadius:\"10px\",overflow:\"hidden\",background:\"#0b1220\",border:\"1px solid rgba(148,163,184,0.2)\",aspectRatio:\"1 / 1\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:preview.url,alt:\"preview-\".concat(index+1),style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}})},preview.url))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"28px\",display:\"flex\",gap:\"12px\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"secondary-button\",style:{padding:\"12px 24px\",border:\"none\",cursor:\"pointer\",borderRadius:\"14px\",fontSize:\"14px\",fontWeight:\"600\"},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSubmit,className:\"primary-button\",disabled:publishing,style:{padding:\"12px 28px\",color:\"white\",border:\"none\",cursor:publishing?\"not-allowed\":\"pointer\",opacity:publishing?0.7:1,borderRadius:\"14px\",fontSize:\"14px\",fontWeight:\"600\",display:\"flex\",alignItems:\"center\",gap:\"8px\"},children:publishing?\"–ü—É–±–ª–∏–∫–∞—Ü–∏—è...\":\"üì§ –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\"})]})]})]})});};export default AdModal;","map":{"version":3,"names":["React","useEffect","useRef","useState","apiFetchJson","XIcon","ChevronRightIcon","RefreshIcon","LoadingIcon","jsx","_jsx","jsxs","_jsxs","AdModal","_ref","isOpen","onClose","onSubmit","publishing","accounts","categories","onRefreshCategories","loadingCategories","extraFields","extraFieldValues","setExtraFieldValues","loadingExtraFields","extraFieldsError","newAd","setNewAd","adImages","setAdImages","categoriesUpdatedAt","categoryPath","setCategoryPath","localCategories","setLocalCategories","didRestorePath","setDidRestorePath","imagePreviews","setImagePreviews","loadingPlz","setLoadingPlz","categoryListRef","pendingChildrenRef","Map","prefetchRootRef","prefetchInFlightRef","prefetchedTargetsRef","Set","prefetchTokenRef","inputStyle","width","padding","border","borderRadius","background","fontSize","color","transition","outline","labelStyle","display","marginBottom","fontWeight","selectedUnderlineStyle","borderBottom","paddingBottom","formatAccountLabel","account","name","profileName","username","email","profileEmail","concat","getCategoryLabel","category","raw","label","title","categoryName","displayName","text","String","trim","fallback","id","url","isNumericCategoryId","value","test","looksLikeCategoryUrl","isAttributeOptionNode","node","parent","parentId","undefined","idValue","urlValue","Array","isArray","children","length","Boolean","filterCategoryChildren","nodes","filter","getCategoryValue","getNodeKey","mergeCategoryTrees","prevNodes","nextNodes","prev","prevMap","key","set","used","merged","map","add","prevNode","get","nextChildren","prevChildren","mergedChildren","_objectSpread","entries","has","push","buildPathToNode","targetValue","path","arguments","target","_node$children","matches","nextValue","nextPath","childPath","findNode","_node$children2","found","getBreadcrumbForPath","breadcrumb","current","pathItem","find","cat","resolveCategorySelection","selectedNode","numericNode","reverse","categoryId","categoryUrl","previews","file","URL","createObjectURL","forEach","preview","revokeObjectURL","currentPath","every","item","idx","restoredPath","accountId","lastId","requestChildren","console","log","getCurrentCategories","join","scrollTop","getSelectedCategory","updateCategorySelection","alert","parentNode","warn","normalizedValue","indexInPath","findIndex","slice","categoryKey","newPath","childrenResult","knownChildren","selectedChildren","fetchedChildren","hasFetchedChildren","hasKnownChildren","isLeaf","next","updateNodeChildren","_node$children3","rawId","rawUrl","pending","task","params","URLSearchParams","_data","data","toString","rawChildren","_data2","refreshParams","filteredChildren","count","sample","_updated$children","updated","error","delete","fetchAccountPostalCode","success","postalCode","message","rootValue","token","_node$children4","Promise","resolve","setTimeout","finally","getCategoryBreadcrumb","goBackInCategories","index","currentCategories","className","style","position","top","left","right","bottom","backgroundColor","backdropFilter","alignItems","justifyContent","zIndex","animation","maxWidth","maxHeight","overflow","boxShadow","gap","height","margin","onClick","cursor","onMouseEnter","e","currentTarget","borderColor","onMouseLeave","size","flexDirection","onChange","proxy","type","placeholder","onFocus","onBlur","description","rows","minHeight","resize","fontFamily","price","Date","toLocaleDateString","disabled","marginTop","flexWrap","Fragment","ref","overflowY","hasChildren","textAlign","borderTop","field","_field$options","required","options","option","whiteSpace","accept","multiple","from","files","gridTemplateColumns","aspectRatio","src","alt","objectFit","opacity"],"sources":["/Users/eurocare/Downloads/barvihaluxury-main/frontend/src/components/AdModal.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { apiFetchJson } from \"../api\";\nimport { XIcon, ChevronRightIcon, RefreshIcon, LoadingIcon } from \"./Icons\";\n\nconst AdModal = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  publishing,\n  accounts,\n  categories,\n  onRefreshCategories,\n  loadingCategories,\n  extraFields,\n  extraFieldValues,\n  setExtraFieldValues,\n  loadingExtraFields,\n  extraFieldsError,\n  newAd,\n  setNewAd,\n  adImages,\n  setAdImages,\n  categoriesUpdatedAt\n}) => {\n  if (!isOpen) return null;\n\n  const [categoryPath, setCategoryPath] = useState([]);\n  const [localCategories, setLocalCategories] = useState([]);\n  const [didRestorePath, setDidRestorePath] = useState(false);\n  const [imagePreviews, setImagePreviews] = useState([]);\n  const [loadingPlz, setLoadingPlz] = useState(false);\n  const categoryListRef = useRef(null);\n  const pendingChildrenRef = useRef(new Map());\n  const prefetchRootRef = useRef(\"\");\n  const prefetchInFlightRef = useRef(false);\n  const prefetchedTargetsRef = useRef(new Set());\n  const prefetchTokenRef = useRef(0);\n\n  const inputStyle = {\n    width: \"100%\",\n    padding: \"12px 16px\",\n    border: \"1px solid rgba(148,163,184,0.2)\",\n    borderRadius: \"14px\",\n    background: \"rgba(15,23,42,0.8)\",\n    fontSize: \"14px\",\n    color: \"#e2e8f0\",\n    transition: \"all 0.2s ease\",\n    outline: \"none\"\n  };\n\n  const labelStyle = {\n    display: \"block\",\n    marginBottom: \"10px\",\n    fontWeight: \"600\",\n    color: \"#e2e8f0\",\n    fontSize: \"14px\"\n  };\n  const selectedUnderlineStyle = {\n    borderBottom: \"1px solid rgba(125, 211, 252, 0.95)\",\n    paddingBottom: \"1px\"\n  };\n\n  const formatAccountLabel = (account) => {\n    const name = account.profileName || account.username || \"–ê–∫–∫–∞—É–Ω—Ç\";\n    const email = account.profileEmail || \"\";\n    return email ? `${name} (${email})` : name;\n  };\n\n  const getCategoryLabel = (category) => {\n    if (!category) return \"\";\n    const raw =\n      category.name ||\n      category.label ||\n      category.title ||\n      category.categoryName ||\n      category.displayName;\n    const text = String(raw || \"\").trim();\n    if (text) return text;\n    const fallback = category.id || category.url || \"\";\n    return String(fallback);\n  };\n\n  const isNumericCategoryId = (value) => /^\\d+$/.test(String(value || \"\"));\n\n  const looksLikeCategoryUrl = (value) => /\\/c\\d+(?:\\/|$)/i.test(String(value || \"\"));\n\n  const isAttributeOptionNode = (node, parent) => {\n    if (!node || !parent) return false;\n    const parentId = parent.id !== undefined && parent.id !== null ? String(parent.id) : \"\";\n    if (!isNumericCategoryId(parentId)) return false;\n    const idValue = node.id !== undefined && node.id !== null ? String(node.id) : \"\";\n    const urlValue = node.url ? String(node.url) : \"\";\n    if (isNumericCategoryId(idValue)) return false;\n    if (looksLikeCategoryUrl(urlValue)) return false;\n    if (Array.isArray(node.children) && node.children.length > 0) return false;\n    return Boolean(idValue || urlValue);\n  };\n\n  const filterCategoryChildren = (nodes, parent) =>\n    (Array.isArray(nodes) ? nodes : []).filter((node) => !isAttributeOptionNode(node, parent));\n\n  const getCategoryValue = (category) => {\n    if (!category) return \"\";\n    const id = category.id !== undefined && category.id !== null ? String(category.id) : \"\";\n    const url = category.url ? String(category.url) : \"\";\n    if (id && isNumericCategoryId(id)) return id;\n    if (url) return url;\n    return id;\n  };\n\n  const getNodeKey = (node) => {\n    if (!node) return \"\";\n    const value = getCategoryValue(node);\n    if (value) return `value:${value}`;\n    if (node.name) return `name:${String(node.name)}`;\n    return \"\";\n  };\n\n  const mergeCategoryTrees = (prevNodes, nextNodes) => {\n    if (!Array.isArray(nextNodes) || !nextNodes.length) {\n      return Array.isArray(prevNodes) ? prevNodes : [];\n    }\n    const prev = Array.isArray(prevNodes) ? prevNodes : [];\n    const prevMap = new Map();\n    for (const node of prev) {\n      const key = getNodeKey(node);\n      if (key) prevMap.set(key, node);\n    }\n    const used = new Set();\n    const merged = nextNodes.map((node) => {\n      const key = getNodeKey(node);\n      if (key) used.add(key);\n      const prevNode = key ? prevMap.get(key) : null;\n      const nextChildren = Array.isArray(node.children) ? node.children : [];\n      const prevChildren = prevNode?.children || [];\n      const mergedChildren = nextChildren.length\n        ? mergeCategoryTrees(prevChildren, nextChildren)\n        : prevChildren;\n      return {\n        ...(prevNode || {}),\n        ...node,\n        children: mergedChildren\n      };\n    });\n    for (const [key, node] of prevMap.entries()) {\n      if (!used.has(key)) merged.push(node);\n    }\n    return merged;\n  };\n\n  const buildPathToNode = (nodes, targetValue, path = []) => {\n    if (!targetValue || !Array.isArray(nodes)) return [];\n    const target = String(targetValue);\n    for (const node of nodes) {\n      const matches =\n        (node.id !== undefined && node.id !== null && String(node.id) === target) ||\n        (node.url && String(node.url) === target);\n      const nextValue = getCategoryValue(node);\n      const nextPath = nextValue ? [...path, nextValue] : path;\n      if (matches) return nextPath;\n      if (node.children?.length) {\n        const childPath = buildPathToNode(node.children, targetValue, nextPath);\n        if (childPath.length) return childPath;\n      }\n    }\n    return [];\n  };\n\n  const findNode = (nodes, value) => {\n    if (!value) return null;\n    for (const node of nodes) {\n      if (String(node.id) === String(value) || String(node.url) === String(value)) return node;\n      if (node.children?.length) {\n        const found = findNode(node.children, value);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n\n  const getBreadcrumbForPath = (path) => {\n    const breadcrumb = [];\n    let current = localCategories;\n    for (const pathItem of path) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (!found) break;\n      breadcrumb.push(found);\n      current = filterCategoryChildren(found.children || [], found);\n    }\n    return breadcrumb;\n  };\n\n  const resolveCategorySelection = (path) => {\n    const breadcrumb = getBreadcrumbForPath(path);\n    const selectedNode = breadcrumb.length ? breadcrumb[breadcrumb.length - 1] : null;\n    const numericNode = [...breadcrumb].reverse().find((node) => /^\\d+$/.test(String(node?.id || \"\")));\n    return {\n      selectedNode,\n      numericNode: numericNode || selectedNode\n    };\n  };\n\n  useEffect(() => {\n    setLocalCategories((prev) => mergeCategoryTrees(prev, categories || []));\n  }, [categories]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setCategoryPath([]);\n      setDidRestorePath(false);\n      setNewAd((prev) => ({\n        ...prev,\n        categoryId: \"\",\n        categoryUrl: \"\",\n        categoryPath: []\n      }));\n    }\n  }, [isOpen, setNewAd]);\n\n  useEffect(() => {\n    if (!adImages || adImages.length === 0) {\n      setImagePreviews([]);\n      return undefined;\n    }\n\n    const previews = adImages.map((file) => ({\n      file,\n      url: URL.createObjectURL(file)\n    }));\n    setImagePreviews(previews);\n\n    return () => {\n      previews.forEach((preview) => URL.revokeObjectURL(preview.url));\n    };\n  }, [adImages]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    setNewAd((prev) => {\n      const currentPath = Array.isArray(prev.categoryPath) ? prev.categoryPath : [];\n      const nextPath = categoryPath;\n      if (currentPath.length === nextPath.length && currentPath.every((item, idx) => String(item) === String(nextPath[idx]))) {\n        return prev;\n      }\n      return { ...prev, categoryPath: [...nextPath] };\n    });\n  }, [isOpen, categoryPath, setNewAd]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (categoryPath.length) return;\n    if (didRestorePath) return;\n    const target = newAd?.categoryId || newAd?.categoryUrl;\n    if (!target) return;\n    const restoredPath = buildPathToNode(localCategories, target);\n    if (restoredPath.length) {\n      setCategoryPath(restoredPath);\n      setDidRestorePath(true);\n    }\n  }, [isOpen, categoryPath.length, didRestorePath, newAd?.categoryId, newAd?.categoryUrl, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!newAd.accountId) return;\n    if (!categoryPath.length) return;\n    const lastId = categoryPath[categoryPath.length - 1];\n    const node = findNode(localCategories, lastId);\n    if (node && (!node.children || node.children.length === 0)) {\n      requestChildren(node);\n    }\n  }, [isOpen, newAd.accountId, categoryPath, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!categoryPath.length) {\n      console.log(\"[AdModal] category path empty\");\n      return;\n    }\n    const current = getCurrentCategories();\n    console.log(\"[AdModal] category path\", categoryPath.join(\" > \"), \"current count\", current.length);\n  }, [isOpen, categoryPath, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!categoryListRef.current) return;\n    categoryListRef.current.scrollTop = 0;\n  }, [isOpen, categoryPath]);\n\n  const getCurrentCategories = () => {\n    if (categoryPath.length === 0) return localCategories;\n\n    let current = localCategories;\n    let parent = null;\n    for (const pathItem of categoryPath) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (!found) {\n        const fallback = findNode(localCategories, pathItem);\n        return filterCategoryChildren(fallback?.children || [], fallback);\n      }\n      parent = found;\n      current = filterCategoryChildren(found.children || [], found);\n    }\n    return current;\n  };\n\n  const getSelectedCategory = () => {\n    if (categoryPath.length === 0) return null;\n    const lastId = categoryPath[categoryPath.length - 1];\n    return findNode(localCategories, lastId);\n  };\n\n  const updateCategorySelection = async (category) => {\n    if (!newAd.accountId) {\n      alert(\"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\");\n      return;\n    }\n    setDidRestorePath(true);\n    const parentNode = getSelectedCategory();\n    if (isAttributeOptionNode(category, parentNode)) {\n      console.warn(\"[AdModal] ignoring attribute option node\", category?.name || category?.id);\n      return;\n    }\n    const value = getCategoryValue(category);\n    if (!value) return;\n    const normalizedValue = String(value);\n\n    // –ï—Å–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —É–∂–µ –≤ –ø—É—Ç–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –Ω–µ–π\n    const indexInPath = categoryPath.findIndex((id) => String(id) === normalizedValue);\n    if (indexInPath !== -1) {\n      const nextPath = categoryPath.slice(0, indexInPath + 1);\n      setCategoryPath(nextPath);\n\n      // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é\n      const { selectedNode, numericNode } = resolveCategorySelection(nextPath);\n      setNewAd((prev) => ({\n        ...prev,\n        categoryId: numericNode?.id ? String(numericNode.id) : \"\",\n        categoryUrl: selectedNode?.url || numericNode?.url || \"\",\n        categoryKey: nextPath.join(\">\"),\n        categoryPath: [...nextPath]\n      }));\n      return;\n    }\n\n    // –î–æ–±–∞–≤–ª—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ –ø—É—Ç—å\n    const newPath = [...categoryPath, normalizedValue];\n    setCategoryPath(newPath);\n\n    // –í–°–ï–ì–î–ê –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–µ—Ç–µ–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å\n    // (—ç—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç –∑–∞–≥—Ä—É–∑–∫—É 3+ —É—Ä–æ–≤–Ω–µ–π)\n    const childrenResult = await requestChildren(category);\n\n    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤ —Ñ–æ—Ä–º–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ –∫–æ–Ω–µ—á–Ω–∞—è\n    const { selectedNode, numericNode } = resolveCategorySelection(newPath);\n    const knownChildren = Array.isArray(category?.children) ? category.children : [];\n    const selectedChildren = Array.isArray(selectedNode?.children) ? selectedNode.children : [];\n    const fetchedChildren = Array.isArray(childrenResult) ? childrenResult : null;\n    const hasFetchedChildren = fetchedChildren\n      ? filterCategoryChildren(fetchedChildren, category).length > 0\n      : null;\n    const hasKnownChildren =\n      filterCategoryChildren(knownChildren, category).length > 0 ||\n      filterCategoryChildren(selectedChildren, selectedNode).length > 0;\n    const isLeaf = hasFetchedChildren !== null ? !hasFetchedChildren : !hasKnownChildren;\n\n    setNewAd((prev) => {\n      const next = { ...prev };\n      if (isLeaf) {\n        next.categoryId = numericNode?.id ? String(numericNode.id) : \"\";\n        next.categoryUrl = selectedNode?.url || numericNode?.url || \"\";\n      } else {\n        next.categoryId = \"\";\n        next.categoryUrl = \"\";\n      }\n      next.categoryKey = newPath.join(\">\");\n      next.categoryPath = [...newPath];\n\n      if (!next.categoryId || next.categoryId !== prev.categoryId) {\n        if (setExtraFieldValues) {\n          setExtraFieldValues({});\n        }\n      }\n      return next;\n    });\n  };\n\n  const updateNodeChildren = (nodes, targetValue, children) =>\n    nodes.map((node) => {\n      const matches = String(node.id) === String(targetValue) || String(node.url) === String(targetValue);\n      if (matches) {\n        return { ...node, children };\n      }\n      if (node.children?.length) {\n        return { ...node, children: updateNodeChildren(node.children, targetValue, children) };\n      }\n      return node;\n    });\n\n  const requestChildren = async (node) => {\n    const rawId = node?.id !== undefined && node?.id !== null ? String(node.id) : \"\";\n    const rawUrl = node?.url ? String(node.url) : \"\";\n    const idValue = rawId && isNumericCategoryId(rawId) ? rawId : \"\";\n    const urlValue = idValue ? \"\" : (rawUrl || \"\");\n    if (!idValue && !urlValue) return;\n    const targetValue = getCategoryValue(node) || idValue || urlValue;\n    if (!targetValue) return;\n\n    const pending = pendingChildrenRef.current.get(targetValue);\n    if (pending) return pending;\n\n    const task = (async () => {\n      const params = new URLSearchParams();\n      if (idValue) params.set(\"id\", idValue);\n      else params.set(\"url\", urlValue);\n      if (newAd?.accountId) params.set(\"accountId\", newAd.accountId);\n      try {\n        let data = await apiFetchJson(`/api/categories/children?${params.toString()}`);\n        let rawChildren = Array.isArray(data?.children) ? data.children : null;\n        if (Array.isArray(rawChildren) && rawChildren.length === 0) {\n          const refreshParams = new URLSearchParams(params.toString());\n          refreshParams.set(\"refresh\", \"true\");\n          data = await apiFetchJson(`/api/categories/children?${refreshParams.toString()}`);\n          rawChildren = Array.isArray(data?.children) ? data.children : rawChildren;\n        }\n        if (!Array.isArray(rawChildren)) return null;\n        const filteredChildren = filterCategoryChildren(rawChildren, node);\n        const count = Array.isArray(filteredChildren) ? filteredChildren.length : 0;\n        const sample = Array.isArray(filteredChildren)\n          ? filteredChildren.slice(0, 5).map((item) => item?.name || item?.id || item?.url)\n          : [];\n        console.log(\"[AdModal] children response count\", count, \"target\", targetValue, \"sample\", sample);\n        setLocalCategories((prev) => {\n          const next = updateNodeChildren(prev, targetValue, filteredChildren);\n          const updated = findNode(next, targetValue);\n          console.log(\"[AdModal] children applied count\", updated?.children?.length || 0, \"target\", targetValue);\n          return next;\n        });\n        return filteredChildren;\n      } catch (error) {\n        return null;\n      }\n    })();\n\n    pendingChildrenRef.current.set(targetValue, task);\n    try {\n      return await task;\n    } finally {\n      pendingChildrenRef.current.delete(targetValue);\n    }\n  };\n\n  const fetchAccountPostalCode = async () => {\n    if (!newAd?.accountId) {\n      alert(\"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\");\n      return;\n    }\n    setLoadingPlz(true);\n    try {\n      const data = await apiFetchJson(`/api/accounts/${newAd.accountId}/plz`);\n      if (data?.success && data?.postalCode) {\n        setNewAd((prev) => ({ ...prev, postalCode: data.postalCode }));\n      } else {\n        alert(data?.error || \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\");\n      }\n    } catch (error) {\n      alert(error?.message || \"–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\");\n    } finally {\n      setLoadingPlz(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!newAd.accountId) return;\n    if (categoryPath.length !== 1) return;\n    const rootValue = String(categoryPath[0] || \"\");\n    if (!rootValue) return;\n\n    if (prefetchRootRef.current !== rootValue) {\n      prefetchRootRef.current = rootValue;\n      prefetchedTargetsRef.current = new Set();\n      prefetchInFlightRef.current = false;\n    }\n\n    if (prefetchInFlightRef.current) return;\n    const current = getCurrentCategories();\n    if (!current.length) return;\n\n    const token = ++prefetchTokenRef.current;\n    prefetchInFlightRef.current = true;\n\n    (async () => {\n      for (const node of current) {\n        if (prefetchTokenRef.current !== token) return;\n        const key = getCategoryValue(node);\n        if (!key) continue;\n        if (prefetchedTargetsRef.current.has(key)) continue;\n        prefetchedTargetsRef.current.add(key);\n        if (node.children?.length) continue;\n        await requestChildren(node);\n        await new Promise((resolve) => setTimeout(resolve, 120));\n      }\n    })().finally(() => {\n      if (prefetchTokenRef.current === token) {\n        prefetchInFlightRef.current = false;\n      }\n    });\n  }, [isOpen, newAd.accountId, categoryPath, localCategories]);\n\n  const getCategoryBreadcrumb = () => {\n    const breadcrumb = [];\n    let current = localCategories;\n\n    for (const pathItem of categoryPath) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (found) {\n        breadcrumb.push(found);\n        current = filterCategoryChildren(found.children || [], found);\n      }\n    }\n\n    return breadcrumb;\n  };\n\n  const goBackInCategories = (index) => {\n    setDidRestorePath(true);\n    if (index < 0) {\n      setCategoryPath([]);\n    } else {\n      setCategoryPath(categoryPath.slice(0, index + 1));\n    }\n  };\n\n  const currentCategories = getCurrentCategories();\n  const breadcrumb = getCategoryBreadcrumb();\n\n  return (\n    <div className=\"modal-overlay\" style={{\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: \"rgba(2, 6, 23, 0.85)\",\n      backdropFilter: \"blur(8px)\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 1000,\n      padding: \"20px\",\n      animation: \"fadeIn 0.2s ease-out\"\n    }}>\n      <div className=\"modal-card modal-card-wide modal-card-tall\" style={{\n        background: \"linear-gradient(145deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%)\",\n        borderRadius: \"24px\",\n        padding: \"32px\",\n        width: \"760px\",\n        maxWidth: \"100%\",\n        maxHeight: \"92vh\",\n        overflow: \"auto\",\n        border: \"1px solid rgba(148,163,184,0.15)\",\n        boxShadow: \"0 30px 60px rgba(0,0,0,0.5), 0 0 60px rgba(0,0,0,0.3)\",\n        color: \"#e2e8f0\",\n        animation: \"scaleIn 0.3s ease-out\"\n      }}>\n        <div style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\",\n          marginBottom: \"28px\"\n        }}>\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"14px\" }}>\n            <div style={{\n              width: \"48px\",\n              height: \"48px\",\n              borderRadius: \"14px\",\n              background: \"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1))\",\n              border: \"1px solid rgba(245, 158, 11, 0.3)\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              boxShadow: \"0 4px 15px rgba(245, 158, 11, 0.2)\",\n              fontSize: \"22px\"\n            }}>\n              üì¶\n            </div>\n            <div>\n              <h2 style={{ margin: 0, fontSize: \"22px\", fontWeight: \"700\" }}>–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h2>\n              <p style={{ margin: \"4px 0 0\", color: \"#94a3b8\", fontSize: \"13px\" }}>\n                –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è –∏ –æ–ø—É–±–ª–∏–∫—É–π—Ç–µ –≤ Kleinanzeigen\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            style={{\n              width: \"40px\",\n              height: \"40px\",\n              borderRadius: \"12px\",\n              background: \"rgba(148,163,184,0.1)\",\n              border: \"1px solid rgba(148,163,184,0.2)\",\n              cursor: \"pointer\",\n              color: \"#94a3b8\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              transition: \"all 0.2s ease\"\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = \"rgba(239, 68, 68, 0.15)\";\n              e.currentTarget.style.borderColor = \"rgba(239, 68, 68, 0.3)\";\n              e.currentTarget.style.color = \"#f87171\";\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = \"rgba(148,163,184,0.1)\";\n              e.currentTarget.style.borderColor = \"rgba(148,163,184,0.2)\";\n              e.currentTarget.style.color = \"#94a3b8\";\n            }}\n          >\n            <XIcon size={18} />\n          </button>\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"18px\" }}>\n          <div>\n            <label style={labelStyle}>–ê–∫–∫–∞—É–Ω—Ç:</label>\n            <select\n              value={newAd.accountId}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, accountId: e.target.value }))}\n              style={inputStyle}\n            >\n              <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç</option>\n              {accounts.map((account) => (\n                <option key={account.id} value={account.id}>\n                  {formatAccountLabel(account)} ({account.proxy || \"–ë–µ–∑ –ø—Ä–æ–∫—Å–∏\"})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label style={labelStyle}>–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:</label>\n            <input\n              type=\"text\"\n              value={newAd.title}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, title: e.target.value }))}\n              placeholder=\"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (10-65 —Å–∏–º–≤–æ–ª–æ–≤)\"\n              style={inputStyle}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>–û–ø–∏—Å–∞–Ω–∏–µ:</label>\n            <textarea\n              value={newAd.description}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, description: e.target.value }))}\n              placeholder=\"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ (10-4000 —Å–∏–º–≤–æ–ª–æ–≤)\"\n              rows=\"5\"\n              style={{\n                ...inputStyle,\n                minHeight: \"140px\",\n                resize: \"vertical\",\n                fontFamily: \"inherit\"\n              }}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>–¶–µ–Ω–∞ (EUR):</label>\n            <div style={{ display: \"flex\", gap: \"8px\", alignItems: \"center\" }}>\n              <input\n                type=\"number\"\n                value={newAd.price}\n                onChange={(e) => setNewAd((prev) => ({ ...prev, price: e.target.value }))}\n                placeholder=\"0.00\"\n                style={inputStyle}\n                onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n                onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n              />\n              <span style={{ color: \"#94a3b8\", fontWeight: \"600\" }}>‚Ç¨</span>\n            </div>\n          </div>\n\n          <div>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n              <label style={labelStyle}>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>\n              <div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\n                {categoriesUpdatedAt && (\n                  <span style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>\n                    –û–±–Ω–æ–≤–ª–µ–Ω–æ: {new Date(categoriesUpdatedAt).toLocaleDateString()}\n                  </span>\n                )}\n                <button\n                  type=\"button\"\n                  onClick={() => onRefreshCategories(true)}\n                  disabled={loadingCategories}\n                  className=\"secondary-button\"\n                  style={{\n                    padding: \"6px 12px\",\n                    border: \"1px solid rgba(148,163,184,0.3)\",\n                    cursor: loadingCategories ? \"not-allowed\" : \"pointer\",\n                    fontSize: \"12px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"6px\"\n                  }}\n                >\n                  {loadingCategories ? <LoadingIcon size={14} /> : <RefreshIcon size={14} />}\n                  {loadingCategories ? \"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ...\" : \"–û–±–Ω–æ–≤–∏—Ç—å\"}\n                </button>\n              </div>\n            </div>\n\n            <div style={{\n              border: \"1px solid rgba(148,163,184,0.3)\",\n              borderRadius: \"12px\",\n              background: \"rgba(15,23,42,0.7)\",\n              marginTop: \"10px\",\n              overflow: \"hidden\"\n            }}>\n              <div style={{ padding: \"12px 16px\", borderBottom: \"1px solid rgba(148,163,184,0.2)\" }}>\n                <div style={{ fontWeight: \"600\", color: \"#e2e8f0\" }}>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</div>\n                <div style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</div>\n              </div>\n\n              {/* –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ */}\n              {breadcrumb.length > 0 && (\n                <div style={{\n                  padding: \"10px 16px\",\n                  borderBottom: \"1px solid rgba(148,163,184,0.2)\",\n                  display: \"flex\",\n                  gap: \"8px\",\n                  alignItems: \"center\",\n                  flexWrap: \"wrap\",\n                  fontSize: \"12px\",\n                  color: \"#94a3b8\"\n                }}>\n                  <button\n                    onClick={() => goBackInCategories(-1)}\n                    style={{\n                      background: \"rgba(59,130,246,0.1)\",\n                      border: \"1px solid rgba(59,130,246,0.3)\",\n                      borderRadius: \"6px\",\n                      padding: \"4px 8px\",\n                      cursor: \"pointer\",\n                      color: \"#7dd3fc\",\n                      fontSize: \"12px\",\n                      transition: \"all 0.2s ease\"\n                    }}\n                    onMouseEnter={(e) => e.currentTarget.style.background = \"rgba(59,130,246,0.2)\"}\n                    onMouseLeave={(e) => e.currentTarget.style.background = \"rgba(59,130,246,0.1)\"}\n                  >\n                    –í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n                  </button>\n                  {breadcrumb.map((cat, index) => (\n                    <React.Fragment key={cat.id || cat.url}>\n                      <ChevronRightIcon size={12} />\n                      <button\n                        onClick={() => goBackInCategories(index)}\n                        style={{\n                          background: index === breadcrumb.length - 1 ? \"rgba(59,130,246,0.2)\" : \"rgba(148,163,184,0.1)\",\n                          border: \"1px solid \" + (index === breadcrumb.length - 1 ? \"rgba(59,130,246,0.3)\" : \"rgba(148,163,184,0.2)\"),\n                          borderRadius: \"6px\",\n                          padding: \"4px 8px\",\n                          cursor: index === breadcrumb.length - 1 ? \"default\" : \"pointer\",\n                          color: index === breadcrumb.length - 1 ? \"#7dd3fc\" : \"#e2e8f0\",\n                          fontSize: \"12px\",\n                          transition: \"all 0.2s ease\"\n                        }}\n                      >\n                        {getCategoryLabel(cat)}\n                      </button>\n                    </React.Fragment>\n                  ))}\n                </div>\n              )}\n\n              <div ref={categoryListRef} style={{ padding: \"12px\", minHeight: \"220px\", maxHeight: \"300px\", overflowY: \"auto\" }}>\n                {currentCategories.length ? (\n                  currentCategories.map((category) => {\n                    const value = category.id || category.url || \"\";\n                    const hasChildren = category.children && category.children.length > 0;\n                    return (\n                      <button\n                        key={category.id || category.url || getCategoryLabel(category)}\n                        type=\"button\"\n                        onClick={() => updateCategorySelection(category)}\n                        disabled={!newAd.accountId}\n                        style={{\n                          width: \"100%\",\n                          textAlign: \"left\",\n                          padding: \"10px 12px\",\n                          marginBottom: \"6px\",\n                          borderRadius: \"10px\",\n                          border: \"1px solid transparent\",\n                          background: \"rgba(148,163,184,0.05)\",\n                          color: \"#e2e8f0\",\n                          cursor: newAd.accountId ? \"pointer\" : \"not-allowed\",\n                          transition: \"all 0.2s ease\"\n                        }}\n                        onMouseEnter={(e) => {\n                          e.currentTarget.style.background = \"rgba(59,130,246,0.1)\";\n                          e.currentTarget.style.borderColor = \"rgba(59,130,246,0.3)\";\n                        }}\n                        onMouseLeave={(e) => {\n                          e.currentTarget.style.background = \"rgba(148,163,184,0.05)\";\n                          e.currentTarget.style.borderColor = \"transparent\";\n                        }}\n                      >\n                        <span style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                          <span>{getCategoryLabel(category)}</span>\n                          <ChevronRightIcon size={16} color=\"#94a3b8\" />\n                        </span>\n                      </button>\n                    );\n                  })\n                ) : (\n                  <div style={{ color: \"#94a3b8\", padding: \"12px\", textAlign: \"center\" }}>\n                    {!newAd.accountId\n                      ? \"–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç\"\n                      : categoryPath.length > 0\n                        ? \"–ù–µ—Ç –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–π - —ç—Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è\"\n                        : \"–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã\"}\n                  </div>\n                )}\n              </div>\n\n              <div style={{\n                borderTop: \"1px solid rgba(148,163,184,0.2)\",\n                padding: \"10px 16px\",\n                color: \"#94a3b8\",\n                fontSize: \"12px\",\n                display: \"flex\",\n                gap: \"8px\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\"\n              }}>\n                <span style={{\n                  background: \"rgba(59,130,246,0.2)\",\n                  padding: \"4px 8px\",\n                  borderRadius: \"999px\",\n                  color: \"#e2e8f0\",\n                  fontSize: \"11px\",\n                  fontWeight: \"600\"\n                }}>\n                  –í—ã–±—Ä–∞–Ω–æ\n                </span>\n                {breadcrumb.length > 0 ? (\n                  breadcrumb.map((cat, index) => (\n                    <React.Fragment key={cat.id || cat.url}>\n                      {index > 0 && <ChevronRightIcon size={12} />}\n                      <span style={index === breadcrumb.length - 1 ? selectedUnderlineStyle : undefined}>\n                        {getCategoryLabel(cat)}\n                      </span>\n                    </React.Fragment>\n                  ))\n                ) : (\n                  <span>‚Äî</span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {loadingExtraFields && (\n            <div style={{ color: \"#94a3b8\", fontSize: \"12px\", display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\n              <LoadingIcon size={14} />\n              –ó–∞–≥—Ä—É–∑–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏...\n            </div>\n          )}\n\n          {!loadingExtraFields && extraFieldsError && (\n            <div style={{ color: \"#f87171\", fontSize: \"12px\" }}>\n              –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: {extraFieldsError}\n            </div>\n          )}\n\n          {!loadingExtraFields && !extraFieldsError && (newAd.categoryId || newAd.categoryUrl) && (!extraFields || extraFields.length === 0) && (\n            <div style={{ color: \"#94a3b8\", fontSize: \"12px\" }}>\n              –î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.\n            </div>\n          )}\n\n          {!loadingExtraFields && extraFields?.length > 0 && (\n            <div style={{ marginTop: \"6px\" }}>\n              <label style={labelStyle}>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:</label>\n              <div style={{ display: \"grid\", gap: \"12px\" }}>\n                {extraFields.map((field) => {\n                  const key = field.name || field.label;\n                  const value = key ? (extraFieldValues?.[key] || \"\") : \"\";\n                  return (\n                    <div key={field.name || field.label} style={{ display: \"flex\", flexDirection: \"column\", gap: \"6px\" }}>\n                      <span style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>\n                        {field.label}{field.required ? \" *\" : \"\"}\n                      </span>\n                      <select\n                        value={value}\n                        onChange={(e) => {\n                          const nextValue = e.target.value;\n                          setExtraFieldValues((prev) => ({ ...prev, [key]: nextValue }));\n                        }}\n                        style={inputStyle}\n                      >\n                        <option value=\"\">–í—ã–±–µ—Ä–∏—Ç–µ</option>\n                        {field.options?.map((option) => (\n                          <option key={option.value || option.label} value={option.value}>\n                            {option.label}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          <div>\n            <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", gap: \"12px\" }}>\n              <label style={labelStyle}>PLZ (–∏–Ω–¥–µ–∫—Å):</label>\n              <button\n                type=\"button\"\n                onClick={fetchAccountPostalCode}\n                disabled={loadingPlz}\n                style={{\n                  padding: \"6px 12px\",\n                  borderRadius: \"999px\",\n                  border: \"1px solid rgba(59,130,246,0.35)\",\n                  background: \"rgba(59,130,246,0.1)\",\n                  color: \"#60a5fa\",\n                  fontSize: \"12px\",\n                  fontWeight: \"600\",\n                  cursor: loadingPlz ? \"not-allowed\" : \"pointer\",\n                  whiteSpace: \"nowrap\"\n                }}\n              >\n                {loadingPlz ? \"–ó–∞–≥—Ä—É–∑–∫–∞...\" : \"PLZ –∞–∫–∫–∞—É–Ω—Ç–∞\"}\n              </button>\n            </div>\n            <input\n              type=\"text\"\n              value={newAd.postalCode}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, postalCode: e.target.value }))}\n              placeholder=\"–í–≤–µ–¥–∏—Ç–µ –ø–æ—á—Ç–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å\"\n              style={inputStyle}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={(e) => setAdImages(Array.from(e.target.files || []))}\n              style={{\n                width: \"100%\",\n                padding: \"12px\",\n                border: \"1px dashed rgba(148,163,184,0.4)\",\n                borderRadius: \"12px\",\n                background: \"rgba(15,23,42,0.7)\",\n                color: \"#e2e8f0\",\n                cursor: \"pointer\",\n                transition: \"all 0.3s ease\"\n              }}\n            />\n            {adImages.length > 0 && (\n              <div style={{ marginTop: \"8px\", fontSize: \"12px\", color: \"#94a3b8\" }}>\n                –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {adImages.length}\n              </div>\n            )}\n            {imagePreviews.length > 0 && (\n              <div\n                style={{\n                  marginTop: \"12px\",\n                  display: \"grid\",\n                  gridTemplateColumns: \"repeat(auto-fill, minmax(96px, 1fr))\",\n                  gap: \"8px\"\n                }}\n              >\n                {imagePreviews.map((preview, index) => (\n                  <div\n                    key={preview.url}\n                    style={{\n                      borderRadius: \"10px\",\n                      overflow: \"hidden\",\n                      background: \"#0b1220\",\n                      border: \"1px solid rgba(148,163,184,0.2)\",\n                      aspectRatio: \"1 / 1\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\"\n                    }}\n                  >\n                    <img\n                      src={preview.url}\n                      alt={`preview-${index + 1}`}\n                      style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\n                    />\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <div style={{ marginTop: \"28px\", display: \"flex\", gap: \"12px\", justifyContent: \"flex-end\" }}>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"secondary-button\"\n              style={{\n                padding: \"12px 24px\",\n                border: \"none\",\n                cursor: \"pointer\",\n                borderRadius: \"14px\",\n                fontSize: \"14px\",\n                fontWeight: \"600\"\n              }}\n            >\n              –û—Ç–º–µ–Ω–∞\n            </button>\n            <button\n              type=\"button\"\n              onClick={onSubmit}\n              className=\"primary-button\"\n              disabled={publishing}\n              style={{\n                padding: \"12px 28px\",\n                color: \"white\",\n                border: \"none\",\n                cursor: publishing ? \"not-allowed\" : \"pointer\",\n                opacity: publishing ? 0.7 : 1,\n                borderRadius: \"14px\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"8px\"\n              }}\n            >\n              {publishing ? \"–ü—É–±–ª–∏–∫–∞—Ü–∏—è...\" : \"üì§ –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}