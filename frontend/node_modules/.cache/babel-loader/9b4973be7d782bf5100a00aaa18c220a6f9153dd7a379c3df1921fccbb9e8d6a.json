{"ast":null,"code":"import _objectSpread from\"/Users/eurocare/Downloads/barvihaluxury-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useRef,useState}from\"react\";import{apiFetchJson}from\"../api\";import{XIcon,ChevronRightIcon,RefreshIcon,LoadingIcon}from\"./Icons\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdModal=_ref=>{let{isOpen,onClose,onSubmit,publishing,accounts,categories,onRefreshCategories,loadingCategories,extraFields,extraFieldValues,setExtraFieldValues,loadingExtraFields,extraFieldsError,newAd,setNewAd,adImages,setAdImages,categoriesUpdatedAt}=_ref;if(!isOpen)return null;const[categoryPath,setCategoryPath]=useState([]);const[localCategories,setLocalCategories]=useState([]);const[didRestorePath,setDidRestorePath]=useState(false);const[imagePreviews,setImagePreviews]=useState([]);const[loadingPlz,setLoadingPlz]=useState(false);const[categoryChildrenError,setCategoryChildrenError]=useState(\"\");const categoryListRef=useRef(null);const pendingChildrenRef=useRef(new Map());const prefetchRootRef=useRef(\"\");const prefetchInFlightRef=useRef(false);const prefetchedTargetsRef=useRef(new Set());const prefetchTokenRef=useRef(0);const inputStyle={width:\"100%\",padding:\"12px 16px\",border:\"1px solid rgba(148,163,184,0.2)\",borderRadius:\"14px\",background:\"rgba(15,23,42,0.8)\",fontSize:\"14px\",color:\"#e2e8f0\",transition:\"all 0.2s ease\",outline:\"none\"};const labelStyle={display:\"block\",marginBottom:\"10px\",fontWeight:\"600\",color:\"#e2e8f0\",fontSize:\"14px\"};const selectedUnderlineStyle={borderBottom:\"1px solid rgba(125, 211, 252, 0.95)\",paddingBottom:\"1px\"};const formatAccountLabel=account=>{const name=account.profileName||account.username||\"ÐÐºÐºÐ°ÑƒÐ½Ñ‚\";const email=account.profileEmail||\"\";return email?\"\".concat(name,\" (\").concat(email,\")\"):name;};const getCategoryLabel=category=>{if(!category)return\"\";const raw=category.name||category.label||category.title||category.categoryName||category.displayName;const text=String(raw||\"\").trim();if(text)return text;const fallback=category.id||category.url||\"\";return String(fallback);};const isNumericCategoryId=value=>/^\\d+$/.test(String(value||\"\"));const looksLikeCategoryUrl=value=>/\\/c\\d+(?:\\/|$)/i.test(String(value||\"\"));const isAttributeOptionNode=(node,parent)=>{if(!node||!parent)return false;const parentId=parent.id!==undefined&&parent.id!==null?String(parent.id):\"\";if(!isNumericCategoryId(parentId))return false;const idValue=node.id!==undefined&&node.id!==null?String(node.id):\"\";const urlValue=node.url?String(node.url):\"\";const nameValue=String(node.name||node.label||\"\").trim().toLowerCase();const normalizedId=idValue.trim().toLowerCase();if(isNumericCategoryId(normalizedId))return false;if(looksLikeCategoryUrl(urlValue))return false;if(Array.isArray(node.children)&&node.children.length>0)return false;if(!normalizedId||!nameValue)return false;// Keep real subcategories with slug-like ids (e.g. \"drucker_scanner\").\n// Filter only very small option-like values that are likely field options.\nconst optionLikeValues=new Set([\"ja\",\"nein\",\"yes\",\"no\",\"new\",\"used\",\"other\"]);return optionLikeValues.has(normalizedId)||optionLikeValues.has(nameValue);};const filterCategoryChildren=(nodes,parent)=>(Array.isArray(nodes)?nodes:[]).filter(node=>!isAttributeOptionNode(node,parent));const getCategoryValue=category=>{if(!category)return\"\";const id=category.id!==undefined&&category.id!==null?String(category.id):\"\";const url=category.url?String(category.url):\"\";if(id&&isNumericCategoryId(id))return id;if(url)return url;return id;};const getNodeKey=node=>{if(!node)return\"\";const value=getCategoryValue(node);if(value)return\"value:\".concat(value);if(node.name)return\"name:\".concat(String(node.name));return\"\";};const mergeCategoryTrees=(prevNodes,nextNodes)=>{if(!Array.isArray(nextNodes)||!nextNodes.length){return Array.isArray(prevNodes)?prevNodes:[];}const prev=Array.isArray(prevNodes)?prevNodes:[];const prevMap=new Map();for(const node of prev){const key=getNodeKey(node);if(key)prevMap.set(key,node);}const used=new Set();const merged=nextNodes.map(node=>{const key=getNodeKey(node);if(key)used.add(key);const prevNode=key?prevMap.get(key):null;const nextChildren=Array.isArray(node.children)?node.children:[];const prevChildren=(prevNode===null||prevNode===void 0?void 0:prevNode.children)||[];const mergedChildren=nextChildren.length?mergeCategoryTrees(prevChildren,nextChildren):prevChildren;return _objectSpread(_objectSpread(_objectSpread({},prevNode||{}),node),{},{children:mergedChildren});});for(const[key,node]of prevMap.entries()){if(!used.has(key))merged.push(node);}return merged;};const buildPathToNode=function(nodes,targetValue){let path=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(!targetValue||!Array.isArray(nodes))return[];const target=String(targetValue);for(const node of nodes){var _node$children;const matches=node.id!==undefined&&node.id!==null&&String(node.id)===target||node.url&&String(node.url)===target;const nextValue=getCategoryValue(node);const nextPath=nextValue?[...path,nextValue]:path;if(matches)return nextPath;if((_node$children=node.children)!==null&&_node$children!==void 0&&_node$children.length){const childPath=buildPathToNode(node.children,targetValue,nextPath);if(childPath.length)return childPath;}}return[];};const findNode=(nodes,value)=>{if(!value)return null;for(const node of nodes){var _node$children2;if(String(node.id)===String(value)||String(node.url)===String(value))return node;if((_node$children2=node.children)!==null&&_node$children2!==void 0&&_node$children2.length){const found=findNode(node.children,value);if(found)return found;}}return null;};const getBreadcrumbForPath=path=>{const breadcrumb=[];let current=localCategories;for(const pathItem of path){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(!found)break;breadcrumb.push(found);current=filterCategoryChildren(found.children||[],found);}return breadcrumb;};const resolveCategorySelection=path=>{const breadcrumb=getBreadcrumbForPath(path);const selectedNode=breadcrumb.length?breadcrumb[breadcrumb.length-1]:null;const numericNode=[...breadcrumb].reverse().find(node=>/^\\d+$/.test(String((node===null||node===void 0?void 0:node.id)||\"\")));return{selectedNode,numericNode:numericNode||selectedNode};};useEffect(()=>{setLocalCategories(prev=>mergeCategoryTrees(prev,categories||[]));},[categories]);useEffect(()=>{if(isOpen){setCategoryPath([]);setDidRestorePath(false);setCategoryChildrenError(\"\");setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{categoryId:\"\",categoryUrl:\"\",categoryPath:[]}));}},[isOpen,setNewAd]);useEffect(()=>{if(!adImages||adImages.length===0){setImagePreviews([]);return undefined;}const previews=adImages.map(file=>({file,url:URL.createObjectURL(file)}));setImagePreviews(previews);return()=>{previews.forEach(preview=>URL.revokeObjectURL(preview.url));};},[adImages]);useEffect(()=>{if(!isOpen)return;setNewAd(prev=>{const currentPath=Array.isArray(prev.categoryPath)?prev.categoryPath:[];const nextPath=categoryPath;if(currentPath.length===nextPath.length&&currentPath.every((item,idx)=>String(item)===String(nextPath[idx]))){return prev;}return _objectSpread(_objectSpread({},prev),{},{categoryPath:[...nextPath]});});},[isOpen,categoryPath,setNewAd]);useEffect(()=>{if(!isOpen)return;if(categoryPath.length)return;if(didRestorePath)return;const target=(newAd===null||newAd===void 0?void 0:newAd.categoryId)||(newAd===null||newAd===void 0?void 0:newAd.categoryUrl);if(!target)return;const restoredPath=buildPathToNode(localCategories,target);if(restoredPath.length){setCategoryPath(restoredPath);setDidRestorePath(true);}},[isOpen,categoryPath.length,didRestorePath,newAd===null||newAd===void 0?void 0:newAd.categoryId,newAd===null||newAd===void 0?void 0:newAd.categoryUrl,localCategories]);useEffect(()=>{if(!isOpen)return;if(!newAd.accountId)return;if(!categoryPath.length)return;const lastId=categoryPath[categoryPath.length-1];const node=findNode(localCategories,lastId);if(node&&(!node.children||node.children.length===0)){requestChildren(node);}},[isOpen,newAd.accountId,categoryPath,localCategories]);useEffect(()=>{if(!isOpen)return;if(!categoryPath.length){console.log(\"[AdModal] category path empty\");return;}const current=getCurrentCategories();console.log(\"[AdModal] category path\",categoryPath.join(\" > \"),\"current count\",current.length);},[isOpen,categoryPath,localCategories]);useEffect(()=>{if(!isOpen)return;if(!categoryListRef.current)return;categoryListRef.current.scrollTop=0;},[isOpen,categoryPath]);const getCurrentCategories=()=>{if(categoryPath.length===0)return localCategories;let current=localCategories;let parent=null;for(const pathItem of categoryPath){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(!found){const fallback=findNode(localCategories,pathItem);return filterCategoryChildren((fallback===null||fallback===void 0?void 0:fallback.children)||[],fallback);}parent=found;current=filterCategoryChildren(found.children||[],found);}return current;};const getSelectedCategory=()=>{if(categoryPath.length===0)return null;const lastId=categoryPath[categoryPath.length-1];return findNode(localCategories,lastId);};const updateCategorySelection=async category=>{if(!newAd.accountId){alert(\"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\");return;}setDidRestorePath(true);const parentNode=getSelectedCategory();if(isAttributeOptionNode(category,parentNode)){console.warn(\"[AdModal] ignoring attribute option node\",(category===null||category===void 0?void 0:category.name)||(category===null||category===void 0?void 0:category.id));return;}const value=getCategoryValue(category);if(!value)return;const normalizedValue=String(value);// Ð•ÑÐ»Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÐ¶Ðµ Ð² Ð¿ÑƒÑ‚Ð¸, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ðº Ð½ÐµÐ¹\nconst indexInPath=categoryPath.findIndex(id=>String(id)===normalizedValue);if(indexInPath!==-1){const nextPath=categoryPath.slice(0,indexInPath+1);setCategoryPath(nextPath);// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ\nconst{selectedNode,numericNode}=resolveCategorySelection(nextPath);setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{categoryId:numericNode!==null&&numericNode!==void 0&&numericNode.id?String(numericNode.id):\"\",categoryUrl:(selectedNode===null||selectedNode===void 0?void 0:selectedNode.url)||(numericNode===null||numericNode===void 0?void 0:numericNode.url)||\"\",categoryKey:nextPath.join(\">\"),categoryPath:[...nextPath]}));return;}// Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð² Ð¿ÑƒÑ‚ÑŒ\nconst newPath=[...categoryPath,normalizedValue];setCategoryPath(newPath);setCategoryChildrenError(\"\");// Ð’Ð¡Ð•Ð“Ð”Ð Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´ÐµÑ‚ÐµÐ¹, Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ ÐµÑÑ‚ÑŒ\n// (ÑÑ‚Ð¾ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ 3+ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¹)\nconst childrenResult=await requestChildren(category);// ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð² Ñ„Ð¾Ñ€Ð¼Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¾Ð½Ð° ÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ\nconst{selectedNode,numericNode}=resolveCategorySelection(newPath);const knownChildren=Array.isArray(category===null||category===void 0?void 0:category.children)?category.children:[];const selectedChildren=Array.isArray(selectedNode===null||selectedNode===void 0?void 0:selectedNode.children)?selectedNode.children:[];const fetchedChildren=Array.isArray(childrenResult)?childrenResult:null;const hasFetchedChildren=fetchedChildren?filterCategoryChildren(fetchedChildren,category).length>0:null;const hasKnownChildren=filterCategoryChildren(knownChildren,category).length>0||filterCategoryChildren(selectedChildren,selectedNode).length>0;const childrenLoadFailed=childrenResult===null&&!hasKnownChildren;const isLeaf=childrenLoadFailed?false:hasFetchedChildren!==null?!hasFetchedChildren:!hasKnownChildren;setNewAd(prev=>{const next=_objectSpread({},prev);if(isLeaf){next.categoryId=numericNode!==null&&numericNode!==void 0&&numericNode.id?String(numericNode.id):\"\";next.categoryUrl=(selectedNode===null||selectedNode===void 0?void 0:selectedNode.url)||(numericNode===null||numericNode===void 0?void 0:numericNode.url)||\"\";}else{next.categoryId=\"\";next.categoryUrl=\"\";}next.categoryKey=newPath.join(\">\");next.categoryPath=[...newPath];if(!next.categoryId||next.categoryId!==prev.categoryId){if(setExtraFieldValues){setExtraFieldValues({});}}return next;});};const updateNodeChildren=(nodes,targetValue,children)=>nodes.map(node=>{var _node$children3;const matches=String(node.id)===String(targetValue)||String(node.url)===String(targetValue);if(matches){return _objectSpread(_objectSpread({},node),{},{children});}if((_node$children3=node.children)!==null&&_node$children3!==void 0&&_node$children3.length){return _objectSpread(_objectSpread({},node),{},{children:updateNodeChildren(node.children,targetValue,children)});}return node;});const requestChildren=async node=>{const rawId=(node===null||node===void 0?void 0:node.id)!==undefined&&(node===null||node===void 0?void 0:node.id)!==null?String(node.id):\"\";const rawUrl=node!==null&&node!==void 0&&node.url?String(node.url):\"\";const idValue=rawId&&isNumericCategoryId(rawId)?rawId:\"\";const urlValue=idValue?\"\":rawUrl||\"\";if(!idValue&&!urlValue)return;const targetValue=getCategoryValue(node)||idValue||urlValue;if(!targetValue)return;const pending=pendingChildrenRef.current.get(targetValue);if(pending)return pending;const task=(async()=>{const params=new URLSearchParams();if(idValue)params.set(\"id\",idValue);else params.set(\"url\",urlValue);if(newAd!==null&&newAd!==void 0&&newAd.accountId)params.set(\"accountId\",newAd.accountId);try{var _data;let data=await apiFetchJson(\"/api/categories/children?\".concat(params.toString()));let rawChildren=Array.isArray((_data=data)===null||_data===void 0?void 0:_data.children)?data.children:null;if(Array.isArray(rawChildren)&&rawChildren.length===0){var _data2;const refreshParams=new URLSearchParams(params.toString());refreshParams.set(\"refresh\",\"true\");data=await apiFetchJson(\"/api/categories/children?\".concat(refreshParams.toString()));rawChildren=Array.isArray((_data2=data)===null||_data2===void 0?void 0:_data2.children)?data.children:rawChildren;}if(!Array.isArray(rawChildren))return null;const filteredChildren=filterCategoryChildren(rawChildren,node);const count=Array.isArray(filteredChildren)?filteredChildren.length:0;const sample=Array.isArray(filteredChildren)?filteredChildren.slice(0,5).map(item=>(item===null||item===void 0?void 0:item.name)||(item===null||item===void 0?void 0:item.id)||(item===null||item===void 0?void 0:item.url)):[];console.log(\"[AdModal] children response count\",count,\"target\",targetValue,\"sample\",sample);setLocalCategories(prev=>{var _updated$children;const next=updateNodeChildren(prev,targetValue,filteredChildren);const updated=findNode(next,targetValue);console.log(\"[AdModal] children applied count\",(updated===null||updated===void 0?void 0:(_updated$children=updated.children)===null||_updated$children===void 0?void 0:_updated$children.length)||0,\"target\",targetValue);return next;});setCategoryChildrenError(\"\");return filteredChildren;}catch(error){const message=(error===null||error===void 0?void 0:error.message)||\"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸\";console.error(\"[AdModal] children request failed\",{target:targetValue,accountId:(newAd===null||newAd===void 0?void 0:newAd.accountId)||\"\",message});setCategoryChildrenError(\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438: \".concat(message));return null;}})();pendingChildrenRef.current.set(targetValue,task);try{return await task;}finally{pendingChildrenRef.current.delete(targetValue);}};const fetchAccountPostalCode=async()=>{if(!(newAd!==null&&newAd!==void 0&&newAd.accountId)){alert(\"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\");return;}setLoadingPlz(true);try{const data=await apiFetchJson(\"/api/accounts/\".concat(newAd.accountId,\"/plz\"));if(data!==null&&data!==void 0&&data.success&&data!==null&&data!==void 0&&data.postalCode){setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{postalCode:data.postalCode}));}else{alert((data===null||data===void 0?void 0:data.error)||\"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\");}}catch(error){alert((error===null||error===void 0?void 0:error.message)||\"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\");}finally{setLoadingPlz(false);}};useEffect(()=>{if(!isOpen)return;if(!newAd.accountId)return;if(categoryPath.length!==1)return;const rootValue=String(categoryPath[0]||\"\");if(!rootValue)return;if(prefetchRootRef.current!==rootValue){prefetchRootRef.current=rootValue;prefetchedTargetsRef.current=new Set();prefetchInFlightRef.current=false;}if(prefetchInFlightRef.current)return;const current=getCurrentCategories();if(!current.length)return;const token=++prefetchTokenRef.current;prefetchInFlightRef.current=true;(async()=>{for(const node of current){var _node$children4;if(prefetchTokenRef.current!==token)return;const key=getCategoryValue(node);if(!key)continue;if(prefetchedTargetsRef.current.has(key))continue;prefetchedTargetsRef.current.add(key);if((_node$children4=node.children)!==null&&_node$children4!==void 0&&_node$children4.length)continue;await requestChildren(node);await new Promise(resolve=>setTimeout(resolve,120));}})().finally(()=>{if(prefetchTokenRef.current===token){prefetchInFlightRef.current=false;}});},[isOpen,newAd.accountId,categoryPath,localCategories]);const getCategoryBreadcrumb=()=>{const breadcrumb=[];let current=localCategories;for(const pathItem of categoryPath){const found=current.find(cat=>cat.id&&String(cat.id)===String(pathItem)||cat.url&&String(cat.url)===String(pathItem));if(found){breadcrumb.push(found);current=filterCategoryChildren(found.children||[],found);}}return breadcrumb;};const goBackInCategories=index=>{setDidRestorePath(true);if(index<0){setCategoryPath([]);}else{setCategoryPath(categoryPath.slice(0,index+1));}};const currentCategories=getCurrentCategories();const breadcrumb=getCategoryBreadcrumb();return/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",style:{position:\"fixed\",top:0,left:0,right:0,bottom:0,backgroundColor:\"rgba(2, 6, 23, 0.85)\",backdropFilter:\"blur(8px)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:1000,padding:\"20px\",animation:\"fadeIn 0.2s ease-out\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-card modal-card-wide modal-card-tall\",style:{background:\"linear-gradient(145deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%)\",borderRadius:\"24px\",padding:\"32px\",width:\"760px\",maxWidth:\"100%\",maxHeight:\"92vh\",overflow:\"auto\",border:\"1px solid rgba(148,163,184,0.15)\",boxShadow:\"0 30px 60px rgba(0,0,0,0.5), 0 0 60px rgba(0,0,0,0.3)\",color:\"#e2e8f0\",animation:\"scaleIn 0.3s ease-out\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"flex-start\",marginBottom:\"28px\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"14px\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{width:\"48px\",height:\"48px\",borderRadius:\"14px\",background:\"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1))\",border:\"1px solid rgba(245, 158, 11, 0.3)\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",boxShadow:\"0 4px 15px rgba(245, 158, 11, 0.2)\",fontSize:\"22px\"},children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{margin:0,fontSize:\"22px\",fontWeight:\"700\"},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"p\",{style:{margin:\"4px 0 0\",color:\"#94a3b8\",fontSize:\"13px\"},children:\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u043F\\u043E\\u043B\\u044F \\u0438 \\u043E\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0443\\u0439\\u0442\\u0435 \\u0432 Kleinanzeigen\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,style:{width:\"40px\",height:\"40px\",borderRadius:\"12px\",background:\"rgba(148,163,184,0.1)\",border:\"1px solid rgba(148,163,184,0.2)\",cursor:\"pointer\",color:\"#94a3b8\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\",transition:\"all 0.2s ease\"},onMouseEnter:e=>{e.currentTarget.style.background=\"rgba(239, 68, 68, 0.15)\";e.currentTarget.style.borderColor=\"rgba(239, 68, 68, 0.3)\";e.currentTarget.style.color=\"#f87171\";},onMouseLeave:e=>{e.currentTarget.style.background=\"rgba(148,163,184,0.1)\";e.currentTarget.style.borderColor=\"rgba(148,163,184,0.2)\";e.currentTarget.style.color=\"#94a3b8\";},children:/*#__PURE__*/_jsx(XIcon,{size:18})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"18px\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442:\"}),/*#__PURE__*/_jsxs(\"select\",{value:newAd.accountId,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{accountId:e.target.value})),style:inputStyle,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"}),accounts.map(account=>/*#__PURE__*/_jsxs(\"option\",{value:account.id,children:[formatAccountLabel(account),\" (\",account.proxy||\"Ð‘ÐµÐ· Ð¿Ñ€Ð¾ÐºÑÐ¸\",\")\"]},account.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u0431\\u044A\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAd.title,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{title:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 (10-65 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"textarea\",{value:newAd.description,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{description:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 (10-4000 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",rows:\"5\",style:_objectSpread(_objectSpread({},inputStyle),{},{minHeight:\"140px\",resize:\"vertical\",fontFamily:\"inherit\"}),onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0426\\u0435\\u043D\\u0430 (EUR):\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"8px\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newAd.price,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{price:e.target.value})),placeholder:\"0.00\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#94a3b8\",fontWeight:\"600\"},children:\"\\u20AC\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F:\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"10px\",alignItems:\"center\"},children:[categoriesUpdatedAt&&/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:[\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u043E: \",new Date(categoriesUpdatedAt).toLocaleDateString()]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>onRefreshCategories(true),disabled:loadingCategories,className:\"secondary-button\",style:{padding:\"6px 12px\",border:\"1px solid rgba(148,163,184,0.3)\",cursor:loadingCategories?\"not-allowed\":\"pointer\",fontSize:\"12px\",display:\"flex\",alignItems:\"center\",gap:\"6px\"},children:[loadingCategories?/*#__PURE__*/_jsx(LoadingIcon,{size:14}):/*#__PURE__*/_jsx(RefreshIcon,{size:14}),loadingCategories?\"ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ...\":\"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{border:\"1px solid rgba(148,163,184,0.3)\",borderRadius:\"12px\",background:\"rgba(15,23,42,0.7)\",marginTop:\"10px\",overflow:\"hidden\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"12px 16px\",borderBottom:\"1px solid rgba(148,163,184,0.2)\"},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:\"600\",color:\"#e2e8f0\"},children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:\"\\u041D\\u0430\\u0432\\u0438\\u0433\\u0430\\u0446\\u0438\\u044F \\u043F\\u043E \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\\u043C\"})]}),breadcrumb.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"10px 16px\",borderBottom:\"1px solid rgba(148,163,184,0.2)\",display:\"flex\",gap:\"8px\",alignItems:\"center\",flexWrap:\"wrap\",fontSize:\"12px\",color:\"#94a3b8\"},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>goBackInCategories(-1),style:{background:\"rgba(59,130,246,0.1)\",border:\"1px solid rgba(59,130,246,0.3)\",borderRadius:\"6px\",padding:\"4px 8px\",cursor:\"pointer\",color:\"#7dd3fc\",fontSize:\"12px\",transition:\"all 0.2s ease\"},onMouseEnter:e=>e.currentTarget.style.background=\"rgba(59,130,246,0.2)\",onMouseLeave:e=>e.currentTarget.style.background=\"rgba(59,130,246,0.1)\",children:\"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),breadcrumb.map((cat,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ChevronRightIcon,{size:12}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>goBackInCategories(index),style:{background:index===breadcrumb.length-1?\"rgba(59,130,246,0.2)\":\"rgba(148,163,184,0.1)\",border:\"1px solid \"+(index===breadcrumb.length-1?\"rgba(59,130,246,0.3)\":\"rgba(148,163,184,0.2)\"),borderRadius:\"6px\",padding:\"4px 8px\",cursor:index===breadcrumb.length-1?\"default\":\"pointer\",color:index===breadcrumb.length-1?\"#7dd3fc\":\"#e2e8f0\",fontSize:\"12px\",transition:\"all 0.2s ease\"},children:getCategoryLabel(cat)})]},cat.id||cat.url))]}),/*#__PURE__*/_jsx(\"div\",{ref:categoryListRef,style:{padding:\"12px\",minHeight:\"220px\",maxHeight:\"300px\",overflowY:\"auto\"},children:currentCategories.length?currentCategories.map(category=>{return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>updateCategorySelection(category),disabled:!newAd.accountId,style:{width:\"100%\",textAlign:\"left\",padding:\"10px 12px\",marginBottom:\"6px\",borderRadius:\"10px\",border:\"1px solid transparent\",background:\"rgba(148,163,184,0.05)\",color:\"#e2e8f0\",cursor:newAd.accountId?\"pointer\":\"not-allowed\",transition:\"all 0.2s ease\"},onMouseEnter:e=>{e.currentTarget.style.background=\"rgba(59,130,246,0.1)\";e.currentTarget.style.borderColor=\"rgba(59,130,246,0.3)\";},onMouseLeave:e=>{e.currentTarget.style.background=\"rgba(148,163,184,0.05)\";e.currentTarget.style.borderColor=\"transparent\";},children:/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{children:getCategoryLabel(category)}),/*#__PURE__*/_jsx(ChevronRightIcon,{size:16,color:\"#94a3b8\"})]})},category.id||category.url||getCategoryLabel(category));}):/*#__PURE__*/_jsx(\"div\",{style:{color:\"#94a3b8\",padding:\"12px\",textAlign:\"center\"},children:!newAd.accountId?\"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\":categoryChildrenError?\"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Â«ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒÂ».\":categoryPath.length>0?\"ÐÐµÑ‚ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ - ÑÑ‚Ð° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ\":\"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹\"})}),categoryChildrenError&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#f87171\",fontSize:\"12px\",padding:\"0 16px 10px\"},children:categoryChildrenError}),/*#__PURE__*/_jsxs(\"div\",{style:{borderTop:\"1px solid rgba(148,163,184,0.2)\",padding:\"10px 16px\",color:\"#94a3b8\",fontSize:\"12px\",display:\"flex\",gap:\"8px\",flexWrap:\"wrap\",alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{background:\"rgba(59,130,246,0.2)\",padding:\"4px 8px\",borderRadius:\"999px\",color:\"#e2e8f0\",fontSize:\"11px\",fontWeight:\"600\"},children:\"\\u0412\\u044B\\u0431\\u0440\\u0430\\u043D\\u043E\"}),breadcrumb.length>0?breadcrumb.map((cat,index)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[index>0&&/*#__PURE__*/_jsx(ChevronRightIcon,{size:12}),/*#__PURE__*/_jsx(\"span\",{style:index===breadcrumb.length-1?selectedUnderlineStyle:undefined,children:getCategoryLabel(cat)})]},cat.id||cat.url)):/*#__PURE__*/_jsx(\"span\",{children:\"\\u2014\"})]})]})]}),loadingExtraFields&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#94a3b8\",fontSize:\"12px\",display:\"flex\",alignItems:\"center\",gap:\"8px\"},children:[/*#__PURE__*/_jsx(LoadingIcon,{size:14}),\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u043E\\u0432 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438...\"]}),!loadingExtraFields&&extraFieldsError&&/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#f87171\",fontSize:\"12px\"},children:[\"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438: \",extraFieldsError]}),!loadingExtraFields&&!extraFieldsError&&(newAd.categoryId||newAd.categoryUrl)&&(!extraFields||extraFields.length===0)&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"#94a3b8\",fontSize:\"12px\"},children:\"\\u0414\\u043B\\u044F \\u0432\\u044B\\u0431\\u0440\\u0430\\u043D\\u043D\\u043E\\u0439 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438 \\u043D\\u0435\\u0442 \\u0434\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0445 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u043E\\u0432.\"}),!loadingExtraFields&&(extraFields===null||extraFields===void 0?void 0:extraFields.length)>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"6px\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0414\\u043E\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043F\\u0430\\u0440\\u0430\\u043C\\u0435\\u0442\\u0440\\u044B:\"}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"grid\",gap:\"12px\"},children:extraFields.map(field=>{var _field$options;const key=field.name||field.label;const value=key?(extraFieldValues===null||extraFieldValues===void 0?void 0:extraFieldValues[key])||\"\":\"\";return/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"column\",gap:\"6px\"},children:[/*#__PURE__*/_jsxs(\"span\",{style:{fontSize:\"12px\",color:\"#94a3b8\"},children:[field.label,field.required?\" *\":\"\"]}),/*#__PURE__*/_jsxs(\"select\",{value:value,onChange:e=>{const nextValue=e.target.value;setExtraFieldValues(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:nextValue}));},style:inputStyle,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435\"}),(_field$options=field.options)===null||_field$options===void 0?void 0:_field$options.map(option=>/*#__PURE__*/_jsx(\"option\",{value:option.value,children:option.label},option.value||option.label))]})]},field.name||field.label);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\",gap:\"12px\"},children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"PLZ (\\u0438\\u043D\\u0434\\u0435\\u043A\\u0441):\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:fetchAccountPostalCode,disabled:loadingPlz,style:{padding:\"6px 12px\",borderRadius:\"999px\",border:\"1px solid rgba(59,130,246,0.35)\",background:\"rgba(59,130,246,0.1)\",color:\"#60a5fa\",fontSize:\"12px\",fontWeight:\"600\",cursor:loadingPlz?\"not-allowed\":\"pointer\",whiteSpace:\"nowrap\"},children:loadingPlz?\"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...\":\"PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newAd.postalCode,onChange:e=>setNewAd(prev=>_objectSpread(_objectSpread({},prev),{},{postalCode:e.target.value})),placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0447\\u0442\\u043E\\u0432\\u044B\\u0439 \\u0438\\u043D\\u0434\\u0435\\u043A\\u0441\",style:inputStyle,onFocus:e=>e.currentTarget.style.borderColor=\"rgba(59,130,246,0.5)\",onBlur:e=>e.currentTarget.style.borderColor=\"rgba(148,163,184,0.3)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{style:labelStyle,children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",multiple:true,onChange:e=>setAdImages(Array.from(e.target.files||[])),style:{width:\"100%\",padding:\"12px\",border:\"1px dashed rgba(148,163,184,0.4)\",borderRadius:\"12px\",background:\"rgba(15,23,42,0.7)\",color:\"#e2e8f0\",cursor:\"pointer\",transition:\"all 0.3s ease\"}}),adImages.length>0&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"8px\",fontSize:\"12px\",color:\"#94a3b8\"},children:[\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0436\\u0435\\u043D\\u043E \\u0444\\u0430\\u0439\\u043B\\u043E\\u0432: \",adImages.length]}),imagePreviews.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"12px\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill, minmax(96px, 1fr))\",gap:\"8px\"},children:imagePreviews.map((preview,index)=>/*#__PURE__*/_jsx(\"div\",{style:{borderRadius:\"10px\",overflow:\"hidden\",background:\"#0b1220\",border:\"1px solid rgba(148,163,184,0.2)\",aspectRatio:\"1 / 1\",display:\"flex\",alignItems:\"center\",justifyContent:\"center\"},children:/*#__PURE__*/_jsx(\"img\",{src:preview.url,alt:\"preview-\".concat(index+1),style:{width:\"100%\",height:\"100%\",objectFit:\"cover\"}})},preview.url))})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"28px\",display:\"flex\",gap:\"12px\",justifyContent:\"flex-end\"},children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onClose,className:\"secondary-button\",style:{padding:\"12px 24px\",border:\"none\",cursor:\"pointer\",borderRadius:\"14px\",fontSize:\"14px\",fontWeight:\"600\"},children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onSubmit,className:\"primary-button\",disabled:publishing,style:{padding:\"12px 28px\",color:\"white\",border:\"none\",cursor:publishing?\"not-allowed\":\"pointer\",opacity:publishing?0.7:1,borderRadius:\"14px\",fontSize:\"14px\",fontWeight:\"600\",display:\"flex\",alignItems:\"center\",gap:\"8px\"},children:publishing?\"ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ...\":\"ðŸ“¤ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ðµ\"})]})]})]})});};export default AdModal;","map":{"version":3,"names":["React","useEffect","useRef","useState","apiFetchJson","XIcon","ChevronRightIcon","RefreshIcon","LoadingIcon","jsx","_jsx","jsxs","_jsxs","AdModal","_ref","isOpen","onClose","onSubmit","publishing","accounts","categories","onRefreshCategories","loadingCategories","extraFields","extraFieldValues","setExtraFieldValues","loadingExtraFields","extraFieldsError","newAd","setNewAd","adImages","setAdImages","categoriesUpdatedAt","categoryPath","setCategoryPath","localCategories","setLocalCategories","didRestorePath","setDidRestorePath","imagePreviews","setImagePreviews","loadingPlz","setLoadingPlz","categoryChildrenError","setCategoryChildrenError","categoryListRef","pendingChildrenRef","Map","prefetchRootRef","prefetchInFlightRef","prefetchedTargetsRef","Set","prefetchTokenRef","inputStyle","width","padding","border","borderRadius","background","fontSize","color","transition","outline","labelStyle","display","marginBottom","fontWeight","selectedUnderlineStyle","borderBottom","paddingBottom","formatAccountLabel","account","name","profileName","username","email","profileEmail","concat","getCategoryLabel","category","raw","label","title","categoryName","displayName","text","String","trim","fallback","id","url","isNumericCategoryId","value","test","looksLikeCategoryUrl","isAttributeOptionNode","node","parent","parentId","undefined","idValue","urlValue","nameValue","toLowerCase","normalizedId","Array","isArray","children","length","optionLikeValues","has","filterCategoryChildren","nodes","filter","getCategoryValue","getNodeKey","mergeCategoryTrees","prevNodes","nextNodes","prev","prevMap","key","set","used","merged","map","add","prevNode","get","nextChildren","prevChildren","mergedChildren","_objectSpread","entries","push","buildPathToNode","targetValue","path","arguments","target","_node$children","matches","nextValue","nextPath","childPath","findNode","_node$children2","found","getBreadcrumbForPath","breadcrumb","current","pathItem","find","cat","resolveCategorySelection","selectedNode","numericNode","reverse","categoryId","categoryUrl","previews","file","URL","createObjectURL","forEach","preview","revokeObjectURL","currentPath","every","item","idx","restoredPath","accountId","lastId","requestChildren","console","log","getCurrentCategories","join","scrollTop","getSelectedCategory","updateCategorySelection","alert","parentNode","warn","normalizedValue","indexInPath","findIndex","slice","categoryKey","newPath","childrenResult","knownChildren","selectedChildren","fetchedChildren","hasFetchedChildren","hasKnownChildren","childrenLoadFailed","isLeaf","next","updateNodeChildren","_node$children3","rawId","rawUrl","pending","task","params","URLSearchParams","_data","data","toString","rawChildren","_data2","refreshParams","filteredChildren","count","sample","_updated$children","updated","error","message","delete","fetchAccountPostalCode","success","postalCode","rootValue","token","_node$children4","Promise","resolve","setTimeout","finally","getCategoryBreadcrumb","goBackInCategories","index","currentCategories","className","style","position","top","left","right","bottom","backgroundColor","backdropFilter","alignItems","justifyContent","zIndex","animation","maxWidth","maxHeight","overflow","boxShadow","gap","height","margin","onClick","cursor","onMouseEnter","e","currentTarget","borderColor","onMouseLeave","size","flexDirection","onChange","proxy","type","placeholder","onFocus","onBlur","description","rows","minHeight","resize","fontFamily","price","Date","toLocaleDateString","disabled","marginTop","flexWrap","Fragment","ref","overflowY","textAlign","borderTop","field","_field$options","required","options","option","whiteSpace","accept","multiple","from","files","gridTemplateColumns","aspectRatio","src","alt","objectFit","opacity"],"sources":["/Users/eurocare/Downloads/barvihaluxury-main/frontend/src/components/AdModal.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { apiFetchJson } from \"../api\";\nimport { XIcon, ChevronRightIcon, RefreshIcon, LoadingIcon } from \"./Icons\";\n\nconst AdModal = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  publishing,\n  accounts,\n  categories,\n  onRefreshCategories,\n  loadingCategories,\n  extraFields,\n  extraFieldValues,\n  setExtraFieldValues,\n  loadingExtraFields,\n  extraFieldsError,\n  newAd,\n  setNewAd,\n  adImages,\n  setAdImages,\n  categoriesUpdatedAt\n}) => {\n  if (!isOpen) return null;\n\n  const [categoryPath, setCategoryPath] = useState([]);\n  const [localCategories, setLocalCategories] = useState([]);\n  const [didRestorePath, setDidRestorePath] = useState(false);\n  const [imagePreviews, setImagePreviews] = useState([]);\n  const [loadingPlz, setLoadingPlz] = useState(false);\n  const [categoryChildrenError, setCategoryChildrenError] = useState(\"\");\n  const categoryListRef = useRef(null);\n  const pendingChildrenRef = useRef(new Map());\n  const prefetchRootRef = useRef(\"\");\n  const prefetchInFlightRef = useRef(false);\n  const prefetchedTargetsRef = useRef(new Set());\n  const prefetchTokenRef = useRef(0);\n\n  const inputStyle = {\n    width: \"100%\",\n    padding: \"12px 16px\",\n    border: \"1px solid rgba(148,163,184,0.2)\",\n    borderRadius: \"14px\",\n    background: \"rgba(15,23,42,0.8)\",\n    fontSize: \"14px\",\n    color: \"#e2e8f0\",\n    transition: \"all 0.2s ease\",\n    outline: \"none\"\n  };\n\n  const labelStyle = {\n    display: \"block\",\n    marginBottom: \"10px\",\n    fontWeight: \"600\",\n    color: \"#e2e8f0\",\n    fontSize: \"14px\"\n  };\n  const selectedUnderlineStyle = {\n    borderBottom: \"1px solid rgba(125, 211, 252, 0.95)\",\n    paddingBottom: \"1px\"\n  };\n\n  const formatAccountLabel = (account) => {\n    const name = account.profileName || account.username || \"ÐÐºÐºÐ°ÑƒÐ½Ñ‚\";\n    const email = account.profileEmail || \"\";\n    return email ? `${name} (${email})` : name;\n  };\n\n  const getCategoryLabel = (category) => {\n    if (!category) return \"\";\n    const raw =\n      category.name ||\n      category.label ||\n      category.title ||\n      category.categoryName ||\n      category.displayName;\n    const text = String(raw || \"\").trim();\n    if (text) return text;\n    const fallback = category.id || category.url || \"\";\n    return String(fallback);\n  };\n\n  const isNumericCategoryId = (value) => /^\\d+$/.test(String(value || \"\"));\n\n  const looksLikeCategoryUrl = (value) => /\\/c\\d+(?:\\/|$)/i.test(String(value || \"\"));\n\n  const isAttributeOptionNode = (node, parent) => {\n    if (!node || !parent) return false;\n    const parentId = parent.id !== undefined && parent.id !== null ? String(parent.id) : \"\";\n    if (!isNumericCategoryId(parentId)) return false;\n    const idValue = node.id !== undefined && node.id !== null ? String(node.id) : \"\";\n    const urlValue = node.url ? String(node.url) : \"\";\n    const nameValue = String(node.name || node.label || \"\").trim().toLowerCase();\n    const normalizedId = idValue.trim().toLowerCase();\n    if (isNumericCategoryId(normalizedId)) return false;\n    if (looksLikeCategoryUrl(urlValue)) return false;\n    if (Array.isArray(node.children) && node.children.length > 0) return false;\n    if (!normalizedId || !nameValue) return false;\n    // Keep real subcategories with slug-like ids (e.g. \"drucker_scanner\").\n    // Filter only very small option-like values that are likely field options.\n    const optionLikeValues = new Set([\"ja\", \"nein\", \"yes\", \"no\", \"new\", \"used\", \"other\"]);\n    return optionLikeValues.has(normalizedId) || optionLikeValues.has(nameValue);\n  };\n\n  const filterCategoryChildren = (nodes, parent) =>\n    (Array.isArray(nodes) ? nodes : []).filter((node) => !isAttributeOptionNode(node, parent));\n\n  const getCategoryValue = (category) => {\n    if (!category) return \"\";\n    const id = category.id !== undefined && category.id !== null ? String(category.id) : \"\";\n    const url = category.url ? String(category.url) : \"\";\n    if (id && isNumericCategoryId(id)) return id;\n    if (url) return url;\n    return id;\n  };\n\n  const getNodeKey = (node) => {\n    if (!node) return \"\";\n    const value = getCategoryValue(node);\n    if (value) return `value:${value}`;\n    if (node.name) return `name:${String(node.name)}`;\n    return \"\";\n  };\n\n  const mergeCategoryTrees = (prevNodes, nextNodes) => {\n    if (!Array.isArray(nextNodes) || !nextNodes.length) {\n      return Array.isArray(prevNodes) ? prevNodes : [];\n    }\n    const prev = Array.isArray(prevNodes) ? prevNodes : [];\n    const prevMap = new Map();\n    for (const node of prev) {\n      const key = getNodeKey(node);\n      if (key) prevMap.set(key, node);\n    }\n    const used = new Set();\n    const merged = nextNodes.map((node) => {\n      const key = getNodeKey(node);\n      if (key) used.add(key);\n      const prevNode = key ? prevMap.get(key) : null;\n      const nextChildren = Array.isArray(node.children) ? node.children : [];\n      const prevChildren = prevNode?.children || [];\n      const mergedChildren = nextChildren.length\n        ? mergeCategoryTrees(prevChildren, nextChildren)\n        : prevChildren;\n      return {\n        ...(prevNode || {}),\n        ...node,\n        children: mergedChildren\n      };\n    });\n    for (const [key, node] of prevMap.entries()) {\n      if (!used.has(key)) merged.push(node);\n    }\n    return merged;\n  };\n\n  const buildPathToNode = (nodes, targetValue, path = []) => {\n    if (!targetValue || !Array.isArray(nodes)) return [];\n    const target = String(targetValue);\n    for (const node of nodes) {\n      const matches =\n        (node.id !== undefined && node.id !== null && String(node.id) === target) ||\n        (node.url && String(node.url) === target);\n      const nextValue = getCategoryValue(node);\n      const nextPath = nextValue ? [...path, nextValue] : path;\n      if (matches) return nextPath;\n      if (node.children?.length) {\n        const childPath = buildPathToNode(node.children, targetValue, nextPath);\n        if (childPath.length) return childPath;\n      }\n    }\n    return [];\n  };\n\n  const findNode = (nodes, value) => {\n    if (!value) return null;\n    for (const node of nodes) {\n      if (String(node.id) === String(value) || String(node.url) === String(value)) return node;\n      if (node.children?.length) {\n        const found = findNode(node.children, value);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n\n  const getBreadcrumbForPath = (path) => {\n    const breadcrumb = [];\n    let current = localCategories;\n    for (const pathItem of path) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (!found) break;\n      breadcrumb.push(found);\n      current = filterCategoryChildren(found.children || [], found);\n    }\n    return breadcrumb;\n  };\n\n  const resolveCategorySelection = (path) => {\n    const breadcrumb = getBreadcrumbForPath(path);\n    const selectedNode = breadcrumb.length ? breadcrumb[breadcrumb.length - 1] : null;\n    const numericNode = [...breadcrumb].reverse().find((node) => /^\\d+$/.test(String(node?.id || \"\")));\n    return {\n      selectedNode,\n      numericNode: numericNode || selectedNode\n    };\n  };\n\n  useEffect(() => {\n    setLocalCategories((prev) => mergeCategoryTrees(prev, categories || []));\n  }, [categories]);\n\n  useEffect(() => {\n    if (isOpen) {\n      setCategoryPath([]);\n      setDidRestorePath(false);\n      setCategoryChildrenError(\"\");\n      setNewAd((prev) => ({\n        ...prev,\n        categoryId: \"\",\n        categoryUrl: \"\",\n        categoryPath: []\n      }));\n    }\n  }, [isOpen, setNewAd]);\n\n  useEffect(() => {\n    if (!adImages || adImages.length === 0) {\n      setImagePreviews([]);\n      return undefined;\n    }\n\n    const previews = adImages.map((file) => ({\n      file,\n      url: URL.createObjectURL(file)\n    }));\n    setImagePreviews(previews);\n\n    return () => {\n      previews.forEach((preview) => URL.revokeObjectURL(preview.url));\n    };\n  }, [adImages]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    setNewAd((prev) => {\n      const currentPath = Array.isArray(prev.categoryPath) ? prev.categoryPath : [];\n      const nextPath = categoryPath;\n      if (currentPath.length === nextPath.length && currentPath.every((item, idx) => String(item) === String(nextPath[idx]))) {\n        return prev;\n      }\n      return { ...prev, categoryPath: [...nextPath] };\n    });\n  }, [isOpen, categoryPath, setNewAd]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (categoryPath.length) return;\n    if (didRestorePath) return;\n    const target = newAd?.categoryId || newAd?.categoryUrl;\n    if (!target) return;\n    const restoredPath = buildPathToNode(localCategories, target);\n    if (restoredPath.length) {\n      setCategoryPath(restoredPath);\n      setDidRestorePath(true);\n    }\n  }, [isOpen, categoryPath.length, didRestorePath, newAd?.categoryId, newAd?.categoryUrl, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!newAd.accountId) return;\n    if (!categoryPath.length) return;\n    const lastId = categoryPath[categoryPath.length - 1];\n    const node = findNode(localCategories, lastId);\n    if (node && (!node.children || node.children.length === 0)) {\n      requestChildren(node);\n    }\n  }, [isOpen, newAd.accountId, categoryPath, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!categoryPath.length) {\n      console.log(\"[AdModal] category path empty\");\n      return;\n    }\n    const current = getCurrentCategories();\n    console.log(\"[AdModal] category path\", categoryPath.join(\" > \"), \"current count\", current.length);\n  }, [isOpen, categoryPath, localCategories]);\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!categoryListRef.current) return;\n    categoryListRef.current.scrollTop = 0;\n  }, [isOpen, categoryPath]);\n\n  const getCurrentCategories = () => {\n    if (categoryPath.length === 0) return localCategories;\n\n    let current = localCategories;\n    let parent = null;\n    for (const pathItem of categoryPath) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (!found) {\n        const fallback = findNode(localCategories, pathItem);\n        return filterCategoryChildren(fallback?.children || [], fallback);\n      }\n      parent = found;\n      current = filterCategoryChildren(found.children || [], found);\n    }\n    return current;\n  };\n\n  const getSelectedCategory = () => {\n    if (categoryPath.length === 0) return null;\n    const lastId = categoryPath[categoryPath.length - 1];\n    return findNode(localCategories, lastId);\n  };\n\n  const updateCategorySelection = async (category) => {\n    if (!newAd.accountId) {\n      alert(\"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\");\n      return;\n    }\n    setDidRestorePath(true);\n    const parentNode = getSelectedCategory();\n    if (isAttributeOptionNode(category, parentNode)) {\n      console.warn(\"[AdModal] ignoring attribute option node\", category?.name || category?.id);\n      return;\n    }\n    const value = getCategoryValue(category);\n    if (!value) return;\n    const normalizedValue = String(value);\n\n    // Ð•ÑÐ»Ð¸ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ ÑƒÐ¶Ðµ Ð² Ð¿ÑƒÑ‚Ð¸, Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰Ð°ÐµÐ¼ÑÑ Ðº Ð½ÐµÐ¹\n    const indexInPath = categoryPath.findIndex((id) => String(id) === normalizedValue);\n    if (indexInPath !== -1) {\n      const nextPath = categoryPath.slice(0, indexInPath + 1);\n      setCategoryPath(nextPath);\n\n      // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ\n      const { selectedNode, numericNode } = resolveCategorySelection(nextPath);\n      setNewAd((prev) => ({\n        ...prev,\n        categoryId: numericNode?.id ? String(numericNode.id) : \"\",\n        categoryUrl: selectedNode?.url || numericNode?.url || \"\",\n        categoryKey: nextPath.join(\">\"),\n        categoryPath: [...nextPath]\n      }));\n      return;\n    }\n\n    // Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð² Ð¿ÑƒÑ‚ÑŒ\n    const newPath = [...categoryPath, normalizedValue];\n    setCategoryPath(newPath);\n    setCategoryChildrenError(\"\");\n\n    // Ð’Ð¡Ð•Ð“Ð”Ð Ð¿Ñ‹Ñ‚Ð°ÐµÐ¼ÑÑ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð´ÐµÑ‚ÐµÐ¹, Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð¾Ð½Ð¸ ÐµÑÑ‚ÑŒ\n    // (ÑÑ‚Ð¾ Ð¾Ð±ÐµÑÐ¿ÐµÑ‡Ð¸Ñ‚ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÑƒ 3+ ÑƒÑ€Ð¾Ð²Ð½ÐµÐ¹)\n    const childrenResult = await requestChildren(category);\n\n    // ÐžÐ±Ð½Ð¾Ð²Ð»ÑÐµÐ¼ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½ÑƒÑŽ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ Ð² Ñ„Ð¾Ñ€Ð¼Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÐµÑÐ»Ð¸ Ð¾Ð½Ð° ÐºÐ¾Ð½ÐµÑ‡Ð½Ð°Ñ\n    const { selectedNode, numericNode } = resolveCategorySelection(newPath);\n    const knownChildren = Array.isArray(category?.children) ? category.children : [];\n    const selectedChildren = Array.isArray(selectedNode?.children) ? selectedNode.children : [];\n    const fetchedChildren = Array.isArray(childrenResult) ? childrenResult : null;\n    const hasFetchedChildren = fetchedChildren\n      ? filterCategoryChildren(fetchedChildren, category).length > 0\n      : null;\n    const hasKnownChildren =\n      filterCategoryChildren(knownChildren, category).length > 0 ||\n      filterCategoryChildren(selectedChildren, selectedNode).length > 0;\n    const childrenLoadFailed = childrenResult === null && !hasKnownChildren;\n    const isLeaf = childrenLoadFailed\n      ? false\n      : (hasFetchedChildren !== null ? !hasFetchedChildren : !hasKnownChildren);\n\n    setNewAd((prev) => {\n      const next = { ...prev };\n      if (isLeaf) {\n        next.categoryId = numericNode?.id ? String(numericNode.id) : \"\";\n        next.categoryUrl = selectedNode?.url || numericNode?.url || \"\";\n      } else {\n        next.categoryId = \"\";\n        next.categoryUrl = \"\";\n      }\n      next.categoryKey = newPath.join(\">\");\n      next.categoryPath = [...newPath];\n\n      if (!next.categoryId || next.categoryId !== prev.categoryId) {\n        if (setExtraFieldValues) {\n          setExtraFieldValues({});\n        }\n      }\n      return next;\n    });\n  };\n\n  const updateNodeChildren = (nodes, targetValue, children) =>\n    nodes.map((node) => {\n      const matches = String(node.id) === String(targetValue) || String(node.url) === String(targetValue);\n      if (matches) {\n        return { ...node, children };\n      }\n      if (node.children?.length) {\n        return { ...node, children: updateNodeChildren(node.children, targetValue, children) };\n      }\n      return node;\n    });\n\n  const requestChildren = async (node) => {\n    const rawId = node?.id !== undefined && node?.id !== null ? String(node.id) : \"\";\n    const rawUrl = node?.url ? String(node.url) : \"\";\n    const idValue = rawId && isNumericCategoryId(rawId) ? rawId : \"\";\n    const urlValue = idValue ? \"\" : (rawUrl || \"\");\n    if (!idValue && !urlValue) return;\n    const targetValue = getCategoryValue(node) || idValue || urlValue;\n    if (!targetValue) return;\n\n    const pending = pendingChildrenRef.current.get(targetValue);\n    if (pending) return pending;\n\n    const task = (async () => {\n      const params = new URLSearchParams();\n      if (idValue) params.set(\"id\", idValue);\n      else params.set(\"url\", urlValue);\n      if (newAd?.accountId) params.set(\"accountId\", newAd.accountId);\n      try {\n        let data = await apiFetchJson(`/api/categories/children?${params.toString()}`);\n        let rawChildren = Array.isArray(data?.children) ? data.children : null;\n        if (Array.isArray(rawChildren) && rawChildren.length === 0) {\n          const refreshParams = new URLSearchParams(params.toString());\n          refreshParams.set(\"refresh\", \"true\");\n          data = await apiFetchJson(`/api/categories/children?${refreshParams.toString()}`);\n          rawChildren = Array.isArray(data?.children) ? data.children : rawChildren;\n        }\n        if (!Array.isArray(rawChildren)) return null;\n        const filteredChildren = filterCategoryChildren(rawChildren, node);\n        const count = Array.isArray(filteredChildren) ? filteredChildren.length : 0;\n        const sample = Array.isArray(filteredChildren)\n          ? filteredChildren.slice(0, 5).map((item) => item?.name || item?.id || item?.url)\n          : [];\n        console.log(\"[AdModal] children response count\", count, \"target\", targetValue, \"sample\", sample);\n        setLocalCategories((prev) => {\n          const next = updateNodeChildren(prev, targetValue, filteredChildren);\n          const updated = findNode(next, targetValue);\n          console.log(\"[AdModal] children applied count\", updated?.children?.length || 0, \"target\", targetValue);\n          return next;\n        });\n        setCategoryChildrenError(\"\");\n        return filteredChildren;\n      } catch (error) {\n        const message = error?.message || \"ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐµÑ‚Ð¸\";\n        console.error(\"[AdModal] children request failed\", {\n          target: targetValue,\n          accountId: newAd?.accountId || \"\",\n          message\n        });\n        setCategoryChildrenError(`ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸: ${message}`);\n        return null;\n      }\n    })();\n\n    pendingChildrenRef.current.set(targetValue, task);\n    try {\n      return await task;\n    } finally {\n      pendingChildrenRef.current.delete(targetValue);\n    }\n  };\n\n  const fetchAccountPostalCode = async () => {\n    if (!newAd?.accountId) {\n      alert(\"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\");\n      return;\n    }\n    setLoadingPlz(true);\n    try {\n      const data = await apiFetchJson(`/api/accounts/${newAd.accountId}/plz`);\n      if (data?.success && data?.postalCode) {\n        setNewAd((prev) => ({ ...prev, postalCode: data.postalCode }));\n      } else {\n        alert(data?.error || \"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\");\n      }\n    } catch (error) {\n      alert(error?.message || \"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\");\n    } finally {\n      setLoadingPlz(false);\n    }\n  };\n\n  useEffect(() => {\n    if (!isOpen) return;\n    if (!newAd.accountId) return;\n    if (categoryPath.length !== 1) return;\n    const rootValue = String(categoryPath[0] || \"\");\n    if (!rootValue) return;\n\n    if (prefetchRootRef.current !== rootValue) {\n      prefetchRootRef.current = rootValue;\n      prefetchedTargetsRef.current = new Set();\n      prefetchInFlightRef.current = false;\n    }\n\n    if (prefetchInFlightRef.current) return;\n    const current = getCurrentCategories();\n    if (!current.length) return;\n\n    const token = ++prefetchTokenRef.current;\n    prefetchInFlightRef.current = true;\n\n    (async () => {\n      for (const node of current) {\n        if (prefetchTokenRef.current !== token) return;\n        const key = getCategoryValue(node);\n        if (!key) continue;\n        if (prefetchedTargetsRef.current.has(key)) continue;\n        prefetchedTargetsRef.current.add(key);\n        if (node.children?.length) continue;\n        await requestChildren(node);\n        await new Promise((resolve) => setTimeout(resolve, 120));\n      }\n    })().finally(() => {\n      if (prefetchTokenRef.current === token) {\n        prefetchInFlightRef.current = false;\n      }\n    });\n  }, [isOpen, newAd.accountId, categoryPath, localCategories]);\n\n  const getCategoryBreadcrumb = () => {\n    const breadcrumb = [];\n    let current = localCategories;\n\n    for (const pathItem of categoryPath) {\n      const found = current.find((cat) =>\n        (cat.id && String(cat.id) === String(pathItem)) ||\n        (cat.url && String(cat.url) === String(pathItem))\n      );\n      if (found) {\n        breadcrumb.push(found);\n        current = filterCategoryChildren(found.children || [], found);\n      }\n    }\n\n    return breadcrumb;\n  };\n\n  const goBackInCategories = (index) => {\n    setDidRestorePath(true);\n    if (index < 0) {\n      setCategoryPath([]);\n    } else {\n      setCategoryPath(categoryPath.slice(0, index + 1));\n    }\n  };\n\n  const currentCategories = getCurrentCategories();\n  const breadcrumb = getCategoryBreadcrumb();\n\n  return (\n    <div className=\"modal-overlay\" style={{\n      position: \"fixed\",\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: \"rgba(2, 6, 23, 0.85)\",\n      backdropFilter: \"blur(8px)\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      zIndex: 1000,\n      padding: \"20px\",\n      animation: \"fadeIn 0.2s ease-out\"\n    }}>\n      <div className=\"modal-card modal-card-wide modal-card-tall\" style={{\n        background: \"linear-gradient(145deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%)\",\n        borderRadius: \"24px\",\n        padding: \"32px\",\n        width: \"760px\",\n        maxWidth: \"100%\",\n        maxHeight: \"92vh\",\n        overflow: \"auto\",\n        border: \"1px solid rgba(148,163,184,0.15)\",\n        boxShadow: \"0 30px 60px rgba(0,0,0,0.5), 0 0 60px rgba(0,0,0,0.3)\",\n        color: \"#e2e8f0\",\n        animation: \"scaleIn 0.3s ease-out\"\n      }}>\n        <div style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\",\n          marginBottom: \"28px\"\n        }}>\n          <div style={{ display: \"flex\", alignItems: \"center\", gap: \"14px\" }}>\n            <div style={{\n              width: \"48px\",\n              height: \"48px\",\n              borderRadius: \"14px\",\n              background: \"linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(245, 158, 11, 0.1))\",\n              border: \"1px solid rgba(245, 158, 11, 0.3)\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              boxShadow: \"0 4px 15px rgba(245, 158, 11, 0.2)\",\n              fontSize: \"22px\"\n            }}>\n              ðŸ“¦\n            </div>\n            <div>\n              <h2 style={{ margin: 0, fontSize: \"22px\", fontWeight: \"700\" }}>Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ðµ</h2>\n              <p style={{ margin: \"4px 0 0\", color: \"#94a3b8\", fontSize: \"13px\" }}>\n                Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¿Ð¾Ð»Ñ Ð¸ Ð¾Ð¿ÑƒÐ±Ð»Ð¸ÐºÑƒÐ¹Ñ‚Ðµ Ð² Kleinanzeigen\n              </p>\n            </div>\n          </div>\n          <button\n            onClick={onClose}\n            style={{\n              width: \"40px\",\n              height: \"40px\",\n              borderRadius: \"12px\",\n              background: \"rgba(148,163,184,0.1)\",\n              border: \"1px solid rgba(148,163,184,0.2)\",\n              cursor: \"pointer\",\n              color: \"#94a3b8\",\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n              transition: \"all 0.2s ease\"\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.background = \"rgba(239, 68, 68, 0.15)\";\n              e.currentTarget.style.borderColor = \"rgba(239, 68, 68, 0.3)\";\n              e.currentTarget.style.color = \"#f87171\";\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.background = \"rgba(148,163,184,0.1)\";\n              e.currentTarget.style.borderColor = \"rgba(148,163,184,0.2)\";\n              e.currentTarget.style.color = \"#94a3b8\";\n            }}\n          >\n            <XIcon size={18} />\n          </button>\n        </div>\n\n        <div style={{ display: \"flex\", flexDirection: \"column\", gap: \"18px\" }}>\n          <div>\n            <label style={labelStyle}>ÐÐºÐºÐ°ÑƒÐ½Ñ‚:</label>\n            <select\n              value={newAd.accountId}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, accountId: e.target.value }))}\n              style={inputStyle}\n            >\n              <option value=\"\">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚</option>\n              {accounts.map((account) => (\n                <option key={account.id} value={account.id}>\n                  {formatAccountLabel(account)} ({account.proxy || \"Ð‘ÐµÐ· Ð¿Ñ€Ð¾ÐºÑÐ¸\"})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label style={labelStyle}>ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ñ:</label>\n            <input\n              type=\"text\"\n              value={newAd.title}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, title: e.target.value }))}\n              placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ (10-65 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)\"\n              style={inputStyle}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:</label>\n            <textarea\n              value={newAd.description}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, description: e.target.value }))}\n              placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¾Ð¿Ð¸ÑÐ°Ð½Ð¸Ðµ (10-4000 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)\"\n              rows=\"5\"\n              style={{\n                ...inputStyle,\n                minHeight: \"140px\",\n                resize: \"vertical\",\n                fontFamily: \"inherit\"\n              }}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>Ð¦ÐµÐ½Ð° (EUR):</label>\n            <div style={{ display: \"flex\", gap: \"8px\", alignItems: \"center\" }}>\n              <input\n                type=\"number\"\n                value={newAd.price}\n                onChange={(e) => setNewAd((prev) => ({ ...prev, price: e.target.value }))}\n                placeholder=\"0.00\"\n                style={inputStyle}\n                onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n                onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n              />\n              <span style={{ color: \"#94a3b8\", fontWeight: \"600\" }}>â‚¬</span>\n            </div>\n          </div>\n\n          <div>\n            <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n              <label style={labelStyle}>ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ:</label>\n              <div style={{ display: \"flex\", gap: \"10px\", alignItems: \"center\" }}>\n                {categoriesUpdatedAt && (\n                  <span style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>\n                    ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¾: {new Date(categoriesUpdatedAt).toLocaleDateString()}\n                  </span>\n                )}\n                <button\n                  type=\"button\"\n                  onClick={() => onRefreshCategories(true)}\n                  disabled={loadingCategories}\n                  className=\"secondary-button\"\n                  style={{\n                    padding: \"6px 12px\",\n                    border: \"1px solid rgba(148,163,184,0.3)\",\n                    cursor: loadingCategories ? \"not-allowed\" : \"pointer\",\n                    fontSize: \"12px\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"6px\"\n                  }}\n                >\n                  {loadingCategories ? <LoadingIcon size={14} /> : <RefreshIcon size={14} />}\n                  {loadingCategories ? \"ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ...\" : \"ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ\"}\n                </button>\n              </div>\n            </div>\n\n            <div style={{\n              border: \"1px solid rgba(148,163,184,0.3)\",\n              borderRadius: \"12px\",\n              background: \"rgba(15,23,42,0.7)\",\n              marginTop: \"10px\",\n              overflow: \"hidden\"\n            }}>\n              <div style={{ padding: \"12px 16px\", borderBottom: \"1px solid rgba(148,163,184,0.2)\" }}>\n                <div style={{ fontWeight: \"600\", color: \"#e2e8f0\" }}>Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ</div>\n                <div style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>ÐÐ°Ð²Ð¸Ð³Ð°Ñ†Ð¸Ñ Ð¿Ð¾ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑÐ¼</div>\n              </div>\n\n              {/* Ð¥Ð»ÐµÐ±Ð½Ñ‹Ðµ ÐºÑ€Ð¾ÑˆÐºÐ¸ */}\n              {breadcrumb.length > 0 && (\n                <div style={{\n                  padding: \"10px 16px\",\n                  borderBottom: \"1px solid rgba(148,163,184,0.2)\",\n                  display: \"flex\",\n                  gap: \"8px\",\n                  alignItems: \"center\",\n                  flexWrap: \"wrap\",\n                  fontSize: \"12px\",\n                  color: \"#94a3b8\"\n                }}>\n                  <button\n                    onClick={() => goBackInCategories(-1)}\n                    style={{\n                      background: \"rgba(59,130,246,0.1)\",\n                      border: \"1px solid rgba(59,130,246,0.3)\",\n                      borderRadius: \"6px\",\n                      padding: \"4px 8px\",\n                      cursor: \"pointer\",\n                      color: \"#7dd3fc\",\n                      fontSize: \"12px\",\n                      transition: \"all 0.2s ease\"\n                    }}\n                    onMouseEnter={(e) => e.currentTarget.style.background = \"rgba(59,130,246,0.2)\"}\n                    onMouseLeave={(e) => e.currentTarget.style.background = \"rgba(59,130,246,0.1)\"}\n                  >\n                    Ð’ÑÐµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸\n                  </button>\n                  {breadcrumb.map((cat, index) => (\n                    <React.Fragment key={cat.id || cat.url}>\n                      <ChevronRightIcon size={12} />\n                      <button\n                        onClick={() => goBackInCategories(index)}\n                        style={{\n                          background: index === breadcrumb.length - 1 ? \"rgba(59,130,246,0.2)\" : \"rgba(148,163,184,0.1)\",\n                          border: \"1px solid \" + (index === breadcrumb.length - 1 ? \"rgba(59,130,246,0.3)\" : \"rgba(148,163,184,0.2)\"),\n                          borderRadius: \"6px\",\n                          padding: \"4px 8px\",\n                          cursor: index === breadcrumb.length - 1 ? \"default\" : \"pointer\",\n                          color: index === breadcrumb.length - 1 ? \"#7dd3fc\" : \"#e2e8f0\",\n                          fontSize: \"12px\",\n                          transition: \"all 0.2s ease\"\n                        }}\n                      >\n                        {getCategoryLabel(cat)}\n                      </button>\n                    </React.Fragment>\n                  ))}\n                </div>\n              )}\n\n              <div ref={categoryListRef} style={{ padding: \"12px\", minHeight: \"220px\", maxHeight: \"300px\", overflowY: \"auto\" }}>\n                {currentCategories.length ? (\n                  currentCategories.map((category) => {\n                    return (\n                      <button\n                        key={category.id || category.url || getCategoryLabel(category)}\n                        type=\"button\"\n                        onClick={() => updateCategorySelection(category)}\n                        disabled={!newAd.accountId}\n                        style={{\n                          width: \"100%\",\n                          textAlign: \"left\",\n                          padding: \"10px 12px\",\n                          marginBottom: \"6px\",\n                          borderRadius: \"10px\",\n                          border: \"1px solid transparent\",\n                          background: \"rgba(148,163,184,0.05)\",\n                          color: \"#e2e8f0\",\n                          cursor: newAd.accountId ? \"pointer\" : \"not-allowed\",\n                          transition: \"all 0.2s ease\"\n                        }}\n                        onMouseEnter={(e) => {\n                          e.currentTarget.style.background = \"rgba(59,130,246,0.1)\";\n                          e.currentTarget.style.borderColor = \"rgba(59,130,246,0.3)\";\n                        }}\n                        onMouseLeave={(e) => {\n                          e.currentTarget.style.background = \"rgba(148,163,184,0.05)\";\n                          e.currentTarget.style.borderColor = \"transparent\";\n                        }}\n                      >\n                        <span style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                          <span>{getCategoryLabel(category)}</span>\n                          <ChevronRightIcon size={16} color=\"#94a3b8\" />\n                        </span>\n                      </button>\n                    );\n                  })\n                ) : (\n                  <div style={{ color: \"#94a3b8\", padding: \"12px\", textAlign: \"center\" }}>\n                    {!newAd.accountId\n                      ? \"Ð¡Ð½Ð°Ñ‡Ð°Ð»Ð° Ð²Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚\"\n                      : categoryChildrenError\n                        ? \"ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸. ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Â«ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒÂ».\"\n                      : categoryPath.length > 0\n                        ? \"ÐÐµÑ‚ Ð¿Ð¾Ð´ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¹ - ÑÑ‚Ð° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ð°Ñ\"\n                        : \"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹\"}\n                  </div>\n                )}\n              </div>\n\n              {categoryChildrenError && (\n                <div style={{ color: \"#f87171\", fontSize: \"12px\", padding: \"0 16px 10px\" }}>\n                  {categoryChildrenError}\n                </div>\n              )}\n\n              <div style={{\n                borderTop: \"1px solid rgba(148,163,184,0.2)\",\n                padding: \"10px 16px\",\n                color: \"#94a3b8\",\n                fontSize: \"12px\",\n                display: \"flex\",\n                gap: \"8px\",\n                flexWrap: \"wrap\",\n                alignItems: \"center\"\n              }}>\n                <span style={{\n                  background: \"rgba(59,130,246,0.2)\",\n                  padding: \"4px 8px\",\n                  borderRadius: \"999px\",\n                  color: \"#e2e8f0\",\n                  fontSize: \"11px\",\n                  fontWeight: \"600\"\n                }}>\n                  Ð’Ñ‹Ð±Ñ€Ð°Ð½Ð¾\n                </span>\n                {breadcrumb.length > 0 ? (\n                  breadcrumb.map((cat, index) => (\n                    <React.Fragment key={cat.id || cat.url}>\n                      {index > 0 && <ChevronRightIcon size={12} />}\n                      <span style={index === breadcrumb.length - 1 ? selectedUnderlineStyle : undefined}>\n                        {getCategoryLabel(cat)}\n                      </span>\n                    </React.Fragment>\n                  ))\n                ) : (\n                  <span>â€”</span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {loadingExtraFields && (\n            <div style={{ color: \"#94a3b8\", fontSize: \"12px\", display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\n              <LoadingIcon size={14} />\n              Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸...\n            </div>\n          )}\n\n          {!loadingExtraFields && extraFieldsError && (\n            <div style={{ color: \"#f87171\", fontSize: \"12px\" }}>\n              ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð·Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸: {extraFieldsError}\n            </div>\n          )}\n\n          {!loadingExtraFields && !extraFieldsError && (newAd.categoryId || newAd.categoryUrl) && (!extraFields || extraFields.length === 0) && (\n            <div style={{ color: \"#94a3b8\", fontSize: \"12px\" }}>\n              Ð”Ð»Ñ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð½Ð¾Ð¹ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ð¸ Ð½ÐµÑ‚ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð².\n            </div>\n          )}\n\n          {!loadingExtraFields && extraFields?.length > 0 && (\n            <div style={{ marginTop: \"6px\" }}>\n              <label style={labelStyle}>Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:</label>\n              <div style={{ display: \"grid\", gap: \"12px\" }}>\n                {extraFields.map((field) => {\n                  const key = field.name || field.label;\n                  const value = key ? (extraFieldValues?.[key] || \"\") : \"\";\n                  return (\n                    <div key={field.name || field.label} style={{ display: \"flex\", flexDirection: \"column\", gap: \"6px\" }}>\n                      <span style={{ fontSize: \"12px\", color: \"#94a3b8\" }}>\n                        {field.label}{field.required ? \" *\" : \"\"}\n                      </span>\n                      <select\n                        value={value}\n                        onChange={(e) => {\n                          const nextValue = e.target.value;\n                          setExtraFieldValues((prev) => ({ ...prev, [key]: nextValue }));\n                        }}\n                        style={inputStyle}\n                      >\n                        <option value=\"\">Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ</option>\n                        {field.options?.map((option) => (\n                          <option key={option.value || option.label} value={option.value}>\n                            {option.label}\n                          </option>\n                        ))}\n                      </select>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          <div>\n            <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", gap: \"12px\" }}>\n              <label style={labelStyle}>PLZ (Ð¸Ð½Ð´ÐµÐºÑ):</label>\n              <button\n                type=\"button\"\n                onClick={fetchAccountPostalCode}\n                disabled={loadingPlz}\n                style={{\n                  padding: \"6px 12px\",\n                  borderRadius: \"999px\",\n                  border: \"1px solid rgba(59,130,246,0.35)\",\n                  background: \"rgba(59,130,246,0.1)\",\n                  color: \"#60a5fa\",\n                  fontSize: \"12px\",\n                  fontWeight: \"600\",\n                  cursor: loadingPlz ? \"not-allowed\" : \"pointer\",\n                  whiteSpace: \"nowrap\"\n                }}\n              >\n                {loadingPlz ? \"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...\" : \"PLZ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð°\"}\n              </button>\n            </div>\n            <input\n              type=\"text\"\n              value={newAd.postalCode}\n              onChange={(e) => setNewAd((prev) => ({ ...prev, postalCode: e.target.value }))}\n              placeholder=\"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¿Ð¾Ñ‡Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð¸Ð½Ð´ÐµÐºÑ\"\n              style={inputStyle}\n              onFocus={(e) => e.currentTarget.style.borderColor = \"rgba(59,130,246,0.5)\"}\n              onBlur={(e) => e.currentTarget.style.borderColor = \"rgba(148,163,184,0.3)\"}\n            />\n          </div>\n\n          <div>\n            <label style={labelStyle}>Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ:</label>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              multiple\n              onChange={(e) => setAdImages(Array.from(e.target.files || []))}\n              style={{\n                width: \"100%\",\n                padding: \"12px\",\n                border: \"1px dashed rgba(148,163,184,0.4)\",\n                borderRadius: \"12px\",\n                background: \"rgba(15,23,42,0.7)\",\n                color: \"#e2e8f0\",\n                cursor: \"pointer\",\n                transition: \"all 0.3s ease\"\n              }}\n            />\n            {adImages.length > 0 && (\n              <div style={{ marginTop: \"8px\", fontSize: \"12px\", color: \"#94a3b8\" }}>\n                Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð¾ Ñ„Ð°Ð¹Ð»Ð¾Ð²: {adImages.length}\n              </div>\n            )}\n            {imagePreviews.length > 0 && (\n              <div\n                style={{\n                  marginTop: \"12px\",\n                  display: \"grid\",\n                  gridTemplateColumns: \"repeat(auto-fill, minmax(96px, 1fr))\",\n                  gap: \"8px\"\n                }}\n              >\n                {imagePreviews.map((preview, index) => (\n                  <div\n                    key={preview.url}\n                    style={{\n                      borderRadius: \"10px\",\n                      overflow: \"hidden\",\n                      background: \"#0b1220\",\n                      border: \"1px solid rgba(148,163,184,0.2)\",\n                      aspectRatio: \"1 / 1\",\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      justifyContent: \"center\"\n                    }}\n                  >\n                    <img\n                      src={preview.url}\n                      alt={`preview-${index + 1}`}\n                      style={{ width: \"100%\", height: \"100%\", objectFit: \"cover\" }}\n                    />\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <div style={{ marginTop: \"28px\", display: \"flex\", gap: \"12px\", justifyContent: \"flex-end\" }}>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"secondary-button\"\n              style={{\n                padding: \"12px 24px\",\n                border: \"none\",\n                cursor: \"pointer\",\n                borderRadius: \"14px\",\n                fontSize: \"14px\",\n                fontWeight: \"600\"\n              }}\n            >\n              ÐžÑ‚Ð¼ÐµÐ½Ð°\n            </button>\n            <button\n              type=\"button\"\n              onClick={onSubmit}\n              className=\"primary-button\"\n              disabled={publishing}\n              style={{\n                padding: \"12px 28px\",\n                color: \"white\",\n                border: \"none\",\n                cursor: publishing ? \"not-allowed\" : \"pointer\",\n                opacity: publishing ? 0.7 : 1,\n                borderRadius: \"14px\",\n                fontSize: \"14px\",\n                fontWeight: \"600\",\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"8px\"\n              }}\n            >\n              {publishing ? \"ÐŸÑƒÐ±Ð»Ð¸ÐºÐ°Ñ†Ð¸Ñ...\" : \"ðŸ“¤ Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð¾Ð±ÑŠÑÐ²Ð»ÐµÐ½Ð¸Ðµ\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdModal;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}