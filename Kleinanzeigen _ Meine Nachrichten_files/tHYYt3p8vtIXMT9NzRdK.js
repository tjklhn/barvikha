(async function(){const a="rtbhEvents",b="__rtbh.",c=["uid","sid","aid","eid","lid"],d=31536000000,e=[];if(Array.isArray(window.rtbhEvents)||(window.rtbhEvents=[]),window.rtbhEvents.length&&!window.rtbhEvents.push.prototype)try{function f(a,b="ams"){return null===a?void 0:function(d,e,f=null){try{const i=e.filter(a=>!c.includes(a.eventType)&&"init"!==a.eventType);return h(`https://${b}.creativecdn.com/tags/v2?type=json`,{method:"POST",mode:"cors",credentials:"include",referrerPolicy:"no-referrer-when-downgrade",headers:{"Content-Type":"application/json"},redirect:"follow",body:JSON.stringify({...g(a,f),tags:[...i,...s]})},d)}catch(a){}}}function g(a,b=null){const c=document.referrer?document.referrer:"";return{v:"v0.1.7",sr:c,su:location.href,th:b?b:a}}async function h(a,b,c,d){try{const e="function"==typeof c?c:()=>{},f=await fetch(a,b),g=f.status;if(200<=g&&300>g)return e(d?await f.json():await f.text(),f)}catch(a){}}function i(a){try{return JSON.parse(a)}catch(a){return null}}function j(){const b=window[a].filter(a=>a.eventType&&"init"===a.eventType)[0];return b||null}function k(a=null){return a&&a.value?a.value:null}function l(a=null){return a&&a.dc&&["ams","us","phx","sin","ash","asia"].includes(a.dc)?a.dc:"ams"}function m(a){if(v){const b=a||[];for(const a of b)a()}}function n(a){try{const b=JSON.parse(a),c=Array.isArray(b)?b:[];for(const a of c)if(a&&a.url&&a.type)if("img"===(a.type+"").toLowerCase()){const b=new Image;b.src=a.url,b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("scrolling","no"),b.setAttribute("frameBorder","0"),b.setAttribute("style","display:none"),document.body.appendChild(b)}else if("iframe"===(a.type+"").toLowerCase()){const b=document.createElement("iframe");b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("scrolling","no"),b.setAttribute("frameBorder","0"),b.setAttribute("style","display:none"),b.setAttribute("src",a.url),document.body.appendChild(b)}}catch(a){}}function o(a,b){try{const c=p(a,b),d=Object.keys(c);for(const a of d)w(n,c[a],a)}catch(a){}}function p(a,b){try{return a.reduce((a,c)=>{const d=c.hash?c.hash:b;return(a[d]=a[d]||[]).push(c),a},{})}catch(a){}}const q=new RegExp(`^(${c.join("|")})$`),r=function(){function a(a,b,c,d){const e=d&&""!==d?";domain="+encodeURIComponent(d):"",f=c&&""!==c?";expires="+new Date(new Date().getTime()+c).toString():"";document.cookie=a+"="+encodeURIComponent(b)+f+";path=/"+e+";SameSite=none;Secure"}function d(a){const b=window.document.cookie.match("(^|;)\\s*"+a+"\\s*=\\s*([^;]*)\\s*(;|$)");return b?decodeURIComponent(b[2]):null}function e(a,b){window.localStorage.setItem(a,b)}function f(a){return window.localStorage.getItem(a)}function g(a,b){window.sessionStorage.setItem(a,b)}function h(a){return window.sessionStorage.getItem(a)}return{getAllStorages:a=>{const b=h(a);return b?b:d(a)||f(a)},setAllStorages:(b,c,d,f)=>{b&&c&&(a(b,c,d,f),e(b,c),g(b,c))},getStorageTags:()=>{const a=[];for(const d of c){const c=r.getAllStorages(b+d),e=i(c);e&&e.eventType&&a.push(e)}return a}}}();let s=r.getStorageTags(),t=j(),u=l(t),v=k(t),w=f(v,u);m(e);for(const e of c){const c=b+e,f=r.getAllStorages(`__rtbhouse.${e}`),g=r.getAllStorages(c),h=window[a].find(a=>a.eventType===e&&a.id);if(h&&r.setAllStorages(c,JSON.stringify(h),d),!g&&f&&!f.includes("eventType")){r.setAllStorages(b+e,JSON.stringify({eventType:e,id:f}),d)}s=r.getStorageTags()}const x=b+"lid";r.getAllStorages(x)||(r.setAllStorages(x,JSON.stringify({eventType:"lid",id:function(){var a=Math.floor;let b="";for(let c=0;20>c;c++)b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(a(Math.random()*62));return b}()}),d),s=r.getStorageTags()),o(window[a],v),window[a].push=function(){try{const a=Array.prototype.slice.call(arguments).filter(a=>(q.test((a||{}).eventType+"")&&(r.setAllStorages(b+a.eventType,JSON.stringify(a),d),s=r.getStorageTags()),!0));return null===v&&(t=j(),u=l(t),v=k(t),w=f(v,u),m(e)),Array.prototype.push.apply(this,arguments),o(a,v),!0}catch(a){}}}catch(a){}})();